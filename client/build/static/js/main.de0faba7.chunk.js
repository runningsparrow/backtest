(this["webpackJsonpreact-back"]=this["webpackJsonpreact-back"]||[]).push([[0],{1237:function(e,t,a){},1238:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),s=a.n(c),i=a(16),o=a(17),l=a(19),u=a(18),m=a(20),p=a(101),d=a(115),h=(a(69),a(29)),f=(a(119),a(32)),g=(a(93),a(41)),y=(a(120),a(5)),b=a(14),v=a.n(b),E=(a(94),a(36)),O=a(527),w=a(528),k=a.n(w),j=a(338),S=a.n(j);function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(n,r){("GET"===a?S.a.get(e,{params:t}):S.a.post(e,t)).then((function(e){n(e.data)})).catch((function(e){E.a.error("\u8bf7\u6c42\u51fa\u9519\u4e86:"+e.message)}))}))}var x=function(e,t){return C("/login",{username:e,password:t},"POST")},N=function(e){return C("/manage/category/list",{parentId:e})},I=function(e){return C("/manage/category/info",{categoryId:e})},_=function(e,t){return C("/manage/category/add",{categoryName:t,parentId:e},"POST")},P=function(e,t){return C("/manage/category/update",{categoryId:e,categoryName:t},"POST")},T=function(e,t){return C("/manage/product/list",{pageNum:e,pageSize:t})},U=function(e){var t=e.pageNum,a=e.pageSize,n=e.searchName,r=e.searchType;return C("/manage/product/search",Object(O.a)({pageNum:t,pageSize:a},r,n))},F=function(e,t){return C("/manage/product/updateStatus",{productId:e,status:t},"POST")},A=function(e){return C("/manage/img/delete",{name:e},"POST")},M=function(e){return C("/manage/product/"+(e._id?"update":"add"),e,"POST")},R=function(){return C("/manage/role/list")},D=function(e){return C("/manage/role/add",{name:e},"POST")},V=function(e){return C("/manage/role/update",e,"POST")},K=function(e){return C("/manage/user/list",{_id:e})},L=function(e){return C("/manage/user/delete",{_id:e},"POST")},W=function(e){return C("/manage/user/"+(e._id?"update":"add"),e,"POST")},q=function(e){return new Promise((function(t,a){var n="https://api.map.baidu.com/telematics/v3/weather?location=".concat(e,"&output=json&ak=3p49MVra6urFRGOT9s8UBWr2");k()(n,{},(function(e,a){if(console.log("jsonp",e,a),e||"success"!==a.status)E.a.error("\u83b7\u53d6\u5929\u6c14\u4fe1\u606f\u5931\u8d25!");else{var n=a.results[0].weather_data[0],r=n.dayPictureUrl,c=n.weather;t({dayPictureUrl:r,weather:c})}}))}))},z=a(255),J=a.n(z),B={saveUser:function(e){J.a.set("user_key",e)},getUser:function(){return J.a.get("user_key")},delUser:function(){J.a.remove("user_key")}},H=(a(628),a(631),{user:{}}),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){var n,r,c;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e){s.next=8;break}return n=t.username,r=t.password,s.next=4,v.a.awrap(x(n,r));case 4:0===(c=s.sent).status?(B.saveUser(c.data),H.user=c.data,console.log(H.user),a.props.history.replace("/admin/home")):E.a.error(c.msg),s.next=9;break;case 8:console.log("\u6821\u9a8c\u5931\u8d25!!");case 9:case"end":return s.stop()}}))}))},a.validatorPwd=function(e,t,a){t?t.length<3?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e3\u4f4d"):t.length>12?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):/^[a-zA-Z0-9]+$/.test(t)?a():a("\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"):a("\u5bc6\u7801\u5fc5\u987b\u8f93\u5165")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login"},r.a.createElement("header",{className:"login-header"},r.a.createElement("h1",null,"React\u9879\u76ee\uff1a\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement("section",{className:"login-content"},r.a.createElement("h2",null,"\u7528\u6237\u767b\u5f55"),r.a.createElement(f.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(f.a.Item,null,e("username",{rules:[{required:!0,whitespace:!0,message:"\u7528\u6237\u540d\u5fc5\u987b\u8f93\u5165"},{min:2,message:"\u7528\u6237\u540d\u81f3\u5c112\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a12\u4f4d"}]})(r.a.createElement(g.a,{prefix:r.a.createElement(y.a,{type:"user"}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(f.a.Item,null,e("password",{rules:[{validator:this.validatorPwd}]})(r.a.createElement(g.a,{prefix:r.a.createElement(y.a,{type:"lock"}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(f.a.Item,null,r.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))))}}]),t}(n.Component),Q=f.a.create()(G),X=(a(709),a(164)),Y=(a(711),a(117)),Z=[{title:"\u9996\u9875",key:"/admin/home",icon:"home",isPublic:!0},{title:"\u5546\u54c1",key:"/admin/products",icon:"appstore",children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/admin/category",icon:"bars"},{title:"\u5546\u54c1\u7ba1\u7406",key:"/admin/product",icon:"tool"}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/admin/user",icon:"user"},{title:"\u89d2\u8272\u7ba1\u7406",key:"/admin/role",icon:"safety"},{title:"\u56fe\u5f62\u56fe\u8868",key:"/admin/charts",icon:"area-chart",children:[{title:"\u67f1\u5f62\u56fe",key:"/admin/charts/bar",icon:"bar-chart"},{title:"\u6298\u7ebf\u56fe",key:"/admin/charts/line",icon:"line-chart"},{title:"\u997c\u56fe",key:"/admin/charts/pie",icon:"pie-chart"}]}],$=(a(714),Y.a.SubMenu),ee=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).getMenuNOdes_map=function(e){return e.map((function(e){return e.children?r.a.createElement($,{key:e.key,title:r.a.createElement("span",null,r.a.createElement(y.a,{type:e.icon}),r.a.createElement("span",null,e.title))},a.getMenuNOdes_map(e.children)):r.a.createElement(Y.a.Item,{key:e.key},r.a.createElement(p.b,{to:e.key},r.a.createElement(y.a,{type:e.icon}),r.a.createElement("span",null,"\u9996\u9875")))}))},a.getMenuNOdes=function(e){var t=a.props.location.pathname;return e.reduce((function(e,n){a.hasAuth(n)&&(n.children?(n.children.find((function(e){return 0===t.indexOf(e.key)}))&&(a.openKey=n.key),e.push(r.a.createElement($,{key:n.key,title:r.a.createElement("span",null,r.a.createElement(y.a,{type:n.icon}),r.a.createElement("span",null,n.title))},a.getMenuNOdes(n.children)))):e.push(r.a.createElement(Y.a.Item,{key:n.key},r.a.createElement(p.b,{to:n.key},r.a.createElement(y.a,{type:n.icon}),r.a.createElement("span",null,n.title)))));return e}),[])},a.hasAuth=function(e){var t=e.key,a=e.isPublic,n=H.user.role.menus;return!("admin"!==H.user.username&&!a&&-1===n.indexOf(t))||!!e.children&&!!e.children.find((function(e){return-1!==n.indexOf(e.key)}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.menuNodes=this.getMenuNOdes(Z)}},{key:"render",value:function(){var e=this.props.location.pathname,t=this.openKey;return 0===e.indexOf("/admin/product")&&(e="/admin/product"),r.a.createElement("div",{className:"left-nav"},r.a.createElement(p.b,{to:"#",className:"left-nav-header"},r.a.createElement("h1",null,"\u7845\u8c37\u540e\u53f0")),r.a.createElement(Y.a,{mode:"inline",theme:"dark",selectedKeys:[e],defaultOpenKeys:[t]},this.menuNodes))}}]),t}(n.Component),te=Object(d.g)(ee),ae=(a(170),a(66));function ne(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}a(724);var re=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("button",Object.assign({},this.props,{className:"link-button"}))}}]),t}(n.Component),ce=(a(725),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currentTime:ne(Date.now()),dayPictureUrl:"",weather:""},a.getTime=function(){a.intervalId=setInterval((function(){var e=ne(Date.now());a.setState({currentTime:e})}),1e3)},a.getWeather=function(){var e,t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(q("\u6e29\u5dde"));case 2:e=r.sent,t=e.dayPictureUrl,n=e.weather,a.setState({dayPictureUrl:t,weather:n});case 6:case"end":return r.stop()}}))},a.getTitle=function(){var e,t=a.props.location.pathname;return Z.forEach((function(a){if(a.key===t)e=a.title;else if(a.children){var n=a.children.find((function(e){return 0===t.indexOf(e.key)}));n&&(e=n.title)}})),e},a.logOut=function(){ae.a.confirm({title:"\u786e\u5b9a\u9000\u51fa?",onOk:function(){H.user={},localStorage.clear(),a.props.history.replace("/login")}})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getTime(),this.getWeather()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.state,t=e.currentTime,a=e.dayPictureUrl,n=e.weather,c=H.user.username,s=this.getTitle();return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-top"},r.a.createElement("span",null,"\u6b22\u8fce,",c),r.a.createElement(re,{onClick:this.logOut},"\u9000\u51fa")),r.a.createElement("div",{className:"header-bottom"},r.a.createElement("div",{className:"header-bottom-left"},s),r.a.createElement("div",{className:"header-bottom-right"},r.a.createElement("span",null,t),r.a.createElement("img",{src:a,alt:"\u6674"}),r.a.createElement("span",null,n))))}}]),t}(n.Component)),se=Object(d.g)(ce),ie=(a(726),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},"\u6b22\u8fce\u4f7f\u7528\u7845\u8c37\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")}}]),t}(n.Component)),oe=(a(100),a(47)),le=(a(238),a(114)),ue=(a(208),a(62)),me=f.a.Item,pe=ue.a.Option,de=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props,t=e.categorys,a=e.parentId,n=this.props.form.getFieldDecorator;return r.a.createElement(f.a,null,r.a.createElement(me,null,n("parentId",{initialValue:a})(r.a.createElement(ue.a,null,r.a.createElement(pe,{value:"0"},"\u4e00\u7ea7\u5206\u7c7b"),t.map((function(e){return r.a.createElement(pe,{value:e._id},e.name)}))))),r.a.createElement(me,null,n("categoryName",{initialValue:"",rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}))))}}]),t}(n.Component),he=f.a.create()(de),fe=a(1),ge=a.n(fe),ye=f.a.Item,be=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props.form),this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props.categoryName,t=this.props.form.getFieldDecorator;return r.a.createElement(f.a,null,r.a.createElement(ye,null,t("categoryName",{initialValue:e,rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}))))}}]),t}(n.Component);be.propType={categoryName:ge.a.string.isRequired,setForm:ge.a.func.isRequired};var ve=f.a.create()(be),Ee=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!1,categorys:[],subCategorys:[],parentId:"0",parentName:"",showStatus:0},a.showAdd=function(){a.setState({showStatus:1})},a.showUpdate=function(e){a.category=e,a.setState({showStatus:2})},a.handleCancel=function(){a.form.resetFields(),a.setState({showStatus:0})},a.updateCategory=function(){a.form.validateFields((function(e,t){var n,r;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=9;break}return a.setState({showStatus:0}),n=a.category._id,r=t.categoryName,a.form.resetFields(),c.next=7,v.a.awrap(P(n,r));case 7:0===c.sent.status&&a.getCategorys();case 9:case"end":return c.stop()}}))}))},a.addCategory=function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.form.validateFields((function(e,t){var n,r;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=8;break}return a.setState({showStatus:0}),n=t.parentId,r=t.categoryName,a.form.resetFields(),c.next=6,v.a.awrap(_(n,r));case 6:0==c.sent.status&&(n===a.state.parentId?a.getCategorys():a.getCategorys("0"));case 8:case"end":return c.stop()}}))}));case 1:case"end":return e.stop()}}))},a.initColumns=function(){a.columns=[{title:"\u5206\u7c7b\u7684\u540d\u79f0",dataIndex:"name"},{title:"\u64cd\u4f5c",width:300,render:function(e){return r.a.createElement("span",null,r.a.createElement(re,{onClick:function(){return a.showUpdate(e)}},"\u4fee\u6539\u5206\u7c7b"),"0"===a.state.parentId?r.a.createElement(re,{onClick:function(){return a.showSubCategorys(e)}},"\u67e5\u770b\u5b50\u5206\u7c7b"):null)}}]},a.showSubCategorys=function(e){a.setState({parentId:e._id,parentName:e.name},(function(){a.getCategorys()}))},a.showCategorys=function(){a.setState({parentId:"0",parentName:"",subCategorys:[]})},a.getCategorys=function(e){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a.setState({loading:!0}),e=e||a.state.parentId,r.next=4,v.a.awrap(N(e));case 4:t=r.sent,a.setState({loading:!1}),0===t.status?(n=t.data,"0"===e?a.setState({categorys:n}):a.setState({subCategorys:n})):E.a.error("\u83b7\u53d6\u5206\u7c7b\u5217\u8868\u5931\u8d25");case 7:case"end":return r.stop()}}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getCategorys()}},{key:"render",value:function(){var e=this,t=this.state,a=t.categorys,n=t.loading,c=t.subCategorys,s=t.parentId,i=t.parentName,o=t.showStatus,l=this.category||{},u="0"===s?"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868":r.a.createElement("span",null,r.a.createElement(re,{onClick:this.showCategorys},"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"),r.a.createElement(y.a,{type:"arrow-right",style:{marginRight:5}}),r.a.createElement("span",null,i)),m=r.a.createElement(h.a,{type:"primary",onClick:this.showAdd},r.a.createElement(y.a,{type:"plus"}),"\u6dfb\u52a0");return r.a.createElement(oe.a,{title:u,extra:m},r.a.createElement(le.a,{rowKey:"_id",loading:n,dataSource:"0"===s?a:c,columns:this.columns,pagination:{defaultPageSize:5,showQuickJumper:!0}}),r.a.createElement(ae.a,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:1===o,onOk:this.addCategory,onCancel:this.handleCancel},r.a.createElement(he,{categorys:a,parentId:s,setForm:function(t){e.form=t}})),r.a.createElement(ae.a,{title:"\u66f4\u65b0\u5206\u7c7b",visible:2===o,onOk:this.updateCategory,onCancel:this.handleCancel},r.a.createElement(ve,{categoryName:l.name,setForm:function(t){e.form=t}})))}}]),t}(n.Component),Oe=3,we="http://localhost:3001/upload/",ke=ue.a.Option,je=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={total:0,products:[],loading:!1,searchName:"",searchType:"productName"},a.initColumns=function(){a.columns=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",dataIndex:"price",render:function(e){return"\uffe5"+e}},{title:"\u72b6\u6001",width:100,render:function(e){var t=e.status,n=e._id;return r.a.createElement("span",null,r.a.createElement(h.a,{type:"primary",onClick:function(){return a.updateStatus(n,1===t?2:1)}},1===t?"\u4e0b\u67b6":"\u4e0a\u67b6"),r.a.createElement("span",null,1===t?"\u5728\u552e":"\u5df2\u4e0b\u67b6"))}},{title:"\u64cd\u4f5c",width:100,render:function(e){return r.a.createElement("span",null,r.a.createElement(re,{onClick:function(){return a.props.history.push("/admin/product/detail",{product:e})}},"\u8be6\u60c5"),r.a.createElement(re,{onClick:function(){return a.props.history.push("/admin/product/addupate",e)}},"\u4fee\u6539"))}}]},a.getProducts=function(e){var t,n,r,c,s,i,o;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(a.pageNum=e,a.setState({loading:!0}),t=a.state,n=t.searchName,r=t.searchType,!n){l.next=9;break}return l.next=6,v.a.awrap(U({pageNum:e,pageSize:Oe,searchName:n,searchType:r}));case 6:c=l.sent,l.next=12;break;case 9:return l.next=11,v.a.awrap(T(e,Oe));case 11:c=l.sent;case 12:a.setState({loading:!1}),0===c.status&&(s=c.data,i=s.total,o=s.list,a.setState({total:i,products:o}));case 14:case"end":return l.stop()}}))},a.updateStatus=function(e,t){return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(F(e,t));case 2:0===n.sent.status&&(E.a.success("\u66f4\u65b0\u5546\u54c1\u6210\u529f"),a.getProducts(a.pageNum));case 4:case"end":return n.stop()}}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getProducts(1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.products,n=t.total,c=t.loading,s=t.searchName,i=t.searchType,o=r.a.createElement("span",null,r.a.createElement(ue.a,{value:i,style:{width:150},onChange:function(t){return e.setState({searchType:t})}},r.a.createElement(ke,{value:"productName"},"\u6309\u540d\u79f0\u641c\u7d22"),r.a.createElement(ke,{value:"productDesc"},"\u6309\u63cf\u8ff0\u641c\u7d22")),r.a.createElement(g.a,{placeholder:"\u5173\u952e\u5b57",style:{width:200,margin:"0 15px"},value:s,onChange:function(t){return e.setState({searchName:t.target.value})}}),r.a.createElement(h.a,{type:"primary",onClick:function(){return e.getProducts(1)}},"\u641c\u7d22")),l=r.a.createElement(h.a,{type:"primary",onClick:function(){return e.props.history.push("/admin/product/addupate")}},r.a.createElement(y.a,{type:"plus"}),"\u6dfb\u52a0\u5546\u54c1");return r.a.createElement(oe.a,{title:o,extra:l},r.a.createElement(le.a,{bordered:!0,rowKey:"_id",loading:c,dataSource:a,columns:this.columns,pagination:{current:this.pageNum,total:n,defaultPageSize:Oe,showQuickJumper:!0,onChange:this.getProducts}}))}}]),t}(n.Component),Se=(a(792),a(543)),Ce=a(253),xe=a(241),Ne=(a(1239),a(542));function Ie(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var _e=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={previewVisible:!1,previewImage:"",fileList:[]},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,v.a.awrap(Ie(e.originFileObj));case 3:e.preview=t.sent;case 4:a.setState({previewImage:e.url||e.preview,previewVisible:!0});case 5:case"end":return t.stop()}}))},a.handleChange=function(e){var t,n,r,c,s,i;return v.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.file,n=e.fileList,"done"!==t.status){o.next=6;break}0===(r=t.response).status?(E.a.success("\u4e0a\u4f20\u56fe\u7247\u6210\u529f"),c=r.data,s=c.name,i=c.url,(t=n[n.length-1]).name=s,t.url=i):E.a.success("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25"),o.next=11;break;case 6:if("removed"!==t.status){o.next=11;break}return o.next=9,v.a.awrap(A(t.name));case 9:0===o.sent.status?E.a.success("\u5220\u9664\u56fe\u7247\u6210\u529f"):E.a.error("\u5220\u9664\u56fe\u7247\u5931\u8d25");case 11:a.setState({fileList:n}),console.log(n);case 13:case"end":return o.stop()}}))},a.getImgs=function(){return a.state.fileList.map((function(e){return e.name}))};var n=[],r=a.props.imgs;return r&&r.length>0&&(n=r.map((function(e,t){return{uid:-t,name:e,status:"done",url:we+e}}))),a.state={previewVisible:!1,previewImage:"",fileList:n},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,c=r.a.createElement("div",null,r.a.createElement(y.a,{type:"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement("div",null,r.a.createElement(Ne.a,{action:"/manage/img/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=3?null:c),r.a.createElement(ae.a,{visible:t,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),t}(n.Component),Pe=a(139),Te=a(538),Ue=a(539),Fe=a.n(Ue),Ae=a(540),Me=a.n(Ae),Re=(a(926),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={editorState:Pe.EditorState.createEmpty()},a.onEditorStateChange=function(e){a.setState({editorState:e})},a.getDeatil=function(){return Fe()(Object(Pe.convertToRaw)(a.state.editorState.getCurrentContent()))};var n=a.props.detail;if(n){var r=Me()(n);if(r){var c=Pe.ContentState.createFromBlockArray(r.contentBlocks),s=Pe.EditorState.createWithContent(c);a.state={editorState:s}}}return a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.editorState;return r.a.createElement(Te.Editor,{editorState:e,editorStyle:{border:"1px solid black",height:200,paddingLeft:10},onEditorStateChange:this.onEditorStateChange})}}]),t}(n.Component)),De=f.a.Item,Ve=g.a.TextArea,Ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={options:[]},a.validatePrice=function(e,t,a){1*t>0?a():a("\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e1")},a.initOptions=function(e){var t,n,r,c,s,i,o;return v.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.map((function(e){return{value:e._id,label:e.name,isLeaf:!1}})),n=Object(xe.a)(a),r=n.isUpdate,c=n.product,s=c.pCategoryId,c.categoryId,!r||"0"===s){l.next=10;break}return l.next=6,v.a.awrap(a.getCategorys(s));case 6:i=l.sent,o=i.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),t.find((function(e){return e.value===s})).children=o;case 10:a.setState({options:t});case 11:case"end":return l.stop()}}))},a.getCategorys=function(e){var t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.awrap(N(e));case 2:if(0!==(t=r.sent).status){r.next=11;break}if(n=t.data,"0"!==e){r.next=9;break}a.initOptions(n),r.next=10;break;case 9:return r.abrupt("return",n);case 10:a.initOptions(n);case 11:case"end":return r.stop()}}))},a.loadData=function(e){var t,n,r;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return(t=e[e.length-1]).loading=!0,c.next=4,v.a.awrap(a.getCategorys(t.value));case 4:n=c.sent,t.loading=!1,n&&n.length>0?(r=n.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),t.children=r):t.isLeaf=!0,a.setState({options:Object(Ce.a)(a.state.options)});case 8:case"end":return c.stop()}}))},a.submit=function(){a.props.form.validateFields((function(e,t){var n,r,c,s,i,o,l,u,m;return v.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e){p.next=11;break}return n=t.name,r=t.desc,c=t.price,1===(s=t.categoryIds).length?(i="0",o=s[0]):(i=s[0],o=s[1]),l=a.pw.current.getImgs(),u=a.editor.current.getDeatil(),m={name:n,desc:r,price:c,imgs:l,detail:u,pCategoryId:i,categoryId:o},a.isUpdate&&(m._id=a.product._id),p.next=9,v.a.awrap(M(m));case 9:0===p.sent.status?(E.a.success("".concat(a.isUpdate?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u6210\u529f")),a.props.history.goBack()):E.a.error("".concat(a.isUpdate?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u5931\u8d25"));case 11:case"end":return p.stop()}}))}))},a.pw=r.a.createRef(),a.editor=r.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getCategorys("0")}},{key:"componentWillMount",value:function(){var e=this.props.location.state;this.isUpdate=!!e,this.product=e||{}}},{key:"render",value:function(){var e=this,t=this.isUpdate,a=this.product,n=a.pCategoryId,c=a.categoryId,s=a.imgs,i=a.detail,o=[];t&&("0"===n?o.push(c):(o.push(n),o.push(c)));var l=r.a.createElement("span",null,r.a.createElement(re,null,r.a.createElement(y.a,{type:"arrow-left",style:{marginRight:15,fontSize:20},onClick:function(){return e.props.history.goBack()}})),r.a.createElement("span",null,t?"\u4fee\u6539\u5546\u54c1":"\u6dfb\u52a0\u5546\u54c1")),u=this.props.form.getFieldDecorator;return r.a.createElement(oe.a,{title:l,className:"product-detail"},r.a.createElement(f.a,{labelCol:{span:2},wrapperCol:{span:8}},r.a.createElement(De,{label:"\u5546\u54c1\u540d\u79f0"},u("name",{initialValue:a.name,rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u540d\u79f0"}]})(r.a.createElement(g.a,{placeholder:"\u5546\u54c1\u540d\u79f0"}))),r.a.createElement(De,{label:"\u5546\u54c1\u63cf\u8ff0"},u("desc",{initialValue:a.desc,rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}]})(r.a.createElement(Ve,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",autoSize:{minRows:2,maxRows:6}}))),r.a.createElement(De,{label:"\u5546\u54c1\u4ef7\u683c"},u("price",{initialValue:a.price,rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u4ef7\u683c"},{validator:this.validatePrice}]})(r.a.createElement(g.a,{type:"number",placeholder:"\u5546\u54c1\u4ef7\u683c",addonAfter:"\u5143"}))),r.a.createElement(De,{label:"\u5546\u54c1\u5206\u7c7b"},u("categoryIds",{initialValue:o,rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u5206\u7c7b"}]})(r.a.createElement(Se.a,{options:this.state.options,loadData:this.loadData}))),r.a.createElement(De,{label:"\u5546\u54c1\u56fe\u7247"},r.a.createElement(_e,{ref:this.pw,imgs:s})),r.a.createElement(De,{label:"\u5546\u54c1\u8be6\u60c5",labelCol:{span:2},wrapperCol:{span:20}},r.a.createElement(Re,{ref:this.editor,detail:i})),r.a.createElement(De,null,r.a.createElement(h.a,{type:"primary",onClick:function(){return e.submit()}},"\u63d0\u4ea4"))))}}]),t}(n.Component),Le=f.a.create()(Ke),We=(a(927),a(344)),qe=We.a.Item,ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={cName1:"",cName2:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r,c,s,i;return v.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=this.props.location.state.product,t=e.pCategoryId,a=e.categoryId,"0"!==t){o.next=9;break}return o.next=4,v.a.awrap(I(a));case 4:n=o.sent,r=n.data.name,this.setState({cName1:r}),o.next=15;break;case 9:return o.next=11,v.a.awrap(Promise.all([I(t),I(a)]));case 11:c=o.sent,s=c[0].data.name,i=c[1].data.name,this.setState({cName1:s,cName2:i});case 15:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.props.location.state.product,a=t.name,n=t.desc,c=t.price,s=t.imgs,i=t.detail,o=this.state,l=o.cName1,u=o.cName2,m=r.a.createElement("span",null,r.a.createElement(re,null,r.a.createElement(y.a,{type:"arrow-left",style:{marginRight:15,fontSize:20},onClick:function(){return e.props.history.goBack()}})),r.a.createElement("span",null,"\u5546\u54c1\u8be6\u60c5"));return r.a.createElement(oe.a,{title:m,className:"product-detail"},r.a.createElement(We.a,null,r.a.createElement(qe,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u540d\u79f0:"),r.a.createElement("span",null,a)),r.a.createElement(qe,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u63cf\u8ff0:"),r.a.createElement("span",null,n)),r.a.createElement(qe,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u4ef7\u683c:"),r.a.createElement("span",null,c)),r.a.createElement(qe,null,r.a.createElement("span",{className:"left"},"\u6240\u5c5e\u5206\u7c7b:"),r.a.createElement("span",null,l," ",u?"--\x3e"+u:"")),r.a.createElement(qe,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u56fe\u7247:"),r.a.createElement("span",null,s.map((function(e){return r.a.createElement("img",{key:e,className:"product-img",src:we+e})})))),r.a.createElement(qe,null,r.a.createElement("span",{className:"left"},"\u5546\u54c1\u8be6\u60c5:"),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:i}}))))}}]),t}(n.Component),Je=(a(929),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/admin/product",component:je,exact:!0}),r.a.createElement(d.b,{path:"/admin/product/addupate",component:Le}),r.a.createElement(d.b,{path:"/admin/product/detail",component:ze}),r.a.createElement(d.a,{to:"/admin/product"}))}}]),t}(n.Component)),Be=f.a.Item,He=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(f.a,null,r.a.createElement(Be,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},{labelCol:{span:4},wrapperCol:{span:15}}),e("roleName",{initialValue:"",rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))))}}]),t}(n.Component),Ge=f.a.create()(He),Qe=(a(930),a(343)),Xe=f.a.Item,Ye=Qe.a.TreeNode,Ze=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={checkedKeys:[]},a.getMenus=function(){return a.state.checkedKeys},a.getTreeNodes=function(e){return e.reduce((function(e,t){return e.push(r.a.createElement(Ye,{title:t.title,key:t.key},t.children?a.getTreeNodes(t.children):null)),e}),[])},a.onCheck=function(e){console.log("checkedKeys",e),a.setState({checkedKeys:e})};var n=a.props.role.menus;return a.state={checkedKeys:n},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.role.menus;this.setState({checkedKeys:t})}},{key:"componentWillMount",value:function(){this.treeNodes=this.getTreeNodes(Z)}},{key:"render",value:function(){var e=this.props.role,t=this.state.checkedKeys;return r.a.createElement(f.a,{labelCol:{span:4},wrapperCol:{span:15}},r.a.createElement(Xe,{label:"\u89d2\u8272\u540d\u79f0"},r.a.createElement(g.a,{value:e.name,disabled:!0})),r.a.createElement(Qe.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:t,onCheck:this.onCheck},r.a.createElement(Ye,{title:"\u5e73\u53f0\u6743\u9650",key:"all"},this.treeNodes)))}}]),t}(n.Component),$e=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={roles:[],role:{},isShowAdd:!1,isShowJurisdiction:!1},a.handleCancel=function(){},a.addRole=function(){a.form.validateFields((function(e,t){var n,r,c;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log(a.form),e){s.next=9;break}return a.setState({isShowAdd:!1}),n=t.roleName,a.form.resetFields(),s.next=7,v.a.awrap(D(n));case 7:0===(r=s.sent).status?(E.a.success("\u6dfb\u52a0\u6210\u529f"),c=r.data,a.setState((function(e){return{roles:[a.state.roles,c]}}))):E.a.error("\u6dfb\u52a0\u5931\u8d25");case 9:case"end":return s.stop()}}))}))},a.updateRole=function(){var e,t,n;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a.setState({isShowJurisdiction:!1}),e=B.getUser(),t=a.state.role,n=a.jurisdiction.current.getMenus(),t.menus=n,t.auth_time=(new Date).getTime(),t.auth_name=e.username,r.next=9,v.a.awrap(V(t));case 9:0===r.sent.status?t._id===H.user.role_id?(H.user={},B.removeUser(),a.props.history.replace("/login"),E.a.success("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u4fee\u6539\u4e86,\u91cd\u65b0\u767b\u5f55")):(E.a.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f"),a.setState({roles:Object(Ce.a)(a.state.roles)})):E.a.error("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u5931\u8d25");case 11:case"end":return r.stop()}}))},a.initColumn=function(){a.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:function(e){return ne(e)}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:ne},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}]},a.getRoles=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(R());case 2:0===(e=n.sent).status&&(t=e.data,a.setState({roles:t}));case 4:case"end":return n.stop()}}))},a.onRow=function(e){return{onClick:function(t){console.log("row onClick",e),a.setState({role:e})}}},a.jurisdiction=r.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.initColumn()}},{key:"componentDidMount",value:function(){this.getRoles()}},{key:"render",value:function(){var e=this,t=this.state,a=t.roles,n=t.role,c=t.isShowAdd,s=t.isShowJurisdiction,i=r.a.createElement("span",null,r.a.createElement(h.a,{type:"primary",onClick:function(){return e.setState({isShowAdd:!0})}},"\u521b\u5efa\u89d2\u8272")," \xa0\xa0",r.a.createElement(h.a,{type:"primary",onClick:function(){return e.setState({isShowJurisdiction:!0})},disabled:!n._id},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"));return r.a.createElement(oe.a,{title:i},r.a.createElement(le.a,{rowKey:"_id",dataSource:a,columns:this.columns,pagination:{defaultPageSize:Oe,showQuickJumper:!0},rowSelection:{type:"radio",selectedRowKeys:[n._id],onSelect:function(t){e.setState({role:t})}},onRow:this.onRow}),r.a.createElement(ae.a,{title:"\u6dfb\u52a0\u89d2\u8272",visible:c,onOk:this.addRole,onCancel:function(){e.setState({isShowAdd:!1}),e.form.resetFields()}},r.a.createElement(Ge,{setForm:function(t){e.form=t}})),r.a.createElement(ae.a,{title:"\u8bbe\u7f6e\u6743\u9650",visible:s,onOk:this.updateRole,onCancel:function(){e.setState({isShowJurisdiction:!1})}},r.a.createElement(Ze,{ref:this.jurisdiction,role:n})))}}]),t}(n.Component),et=f.a.Item,tt=ue.a.Option,at=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props,t=e.roles,a=e.user,n=this.props.form.getFieldDecorator;return r.a.createElement(f.a,{labelCol:{span:4},wrapperCol:{span:15}},r.a.createElement(et,{label:"\u7528\u6237\u540d\u79f0"},n("username",{initialValue:a.username,rules:[{required:!0,message:"\u7528\u6237\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"}))),a._id?null:r.a.createElement(et,{label:"\u5bc6\u7801"},n("password",{initialValue:a.password,rules:[{required:!0,message:"\u5bc6\u7801\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(g.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),r.a.createElement(et,{label:"\u624b\u673a\u53f7"},n("phone",{initialValue:a.phone,rules:[{required:!0,message:"\u624b\u673a\u53f7\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(g.a,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}))),r.a.createElement(et,{label:"\u90ae\u7bb1"},n("email",{initialValue:a.email,rules:[{required:!0,message:"\u90ae\u7bb1\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),r.a.createElement(et,{label:"\u89d2\u8272"},n("role_id",{initialValue:a.role_id,rules:[{required:!0,message:"\u89d2\u8272\u5fc5\u987b\u9009\u62e9"}]})(r.a.createElement(ue.a,{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272"},t.map((function(e){return r.a.createElement(tt,{key:e._id,value:e._id},e.name)}))))))}}]),t}(n.Component),nt=f.a.create()(at),rt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={users:[],roles:[],isShow:!1},a.initColumns=function(){a.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:ne},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(e){return a.roleNames[e]}},{title:"\u64cd\u4f5c",render:function(e){return r.a.createElement("span",null,r.a.createElement(re,{onClick:function(){return a.showUpdate(e)}},"\u4fee\u6539"),r.a.createElement(re,{onClick:function(){return a.deleteUser(e)}},"\u5220\u9664"))}}]},a.showUpdate=function(e){a.user=e,a.setState({isShow:!0})},a.showAdd=function(){a.user=null,a.setState({isShow:!0})},a.initRoleNames=function(e){var t=e.reduce((function(e,t){return e[t._id]=t.name,e}),{});a.roleNames=t},a.addOrUpdateUser=function(){a.form.validateFields((function(e,t){return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=9;break}return a.form.resetFields(),a.setState({isShow:!1}),console.log(t),a.user&&(t._id=a.user._id),n.next=7,v.a.awrap(W(t));case 7:0===n.sent.status&&(E.a.success("".concat(a.user?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237\u6210\u529f")),a.getUsers());case 9:case"end":return n.stop()}}))}))},a.deleteUser=function(e){ae.a.confirm({title:"\u786e\u8ba4\u5220\u9664".concat(e.username),onOk:function(){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(L(e._id));case 2:0===t.sent.status&&(E.a.success("\u5220\u9664\u7528\u6237\u6210\u529f"),a.getUsers());case 4:case"end":return t.stop()}}))}})},a.getUsers=function(){var e,t,n,r,c;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=H.user._id,s.next=3,v.a.awrap(K(e));case 3:0===(t=s.sent).status&&(n=t.data,r=n.users,c=n.roles,a.initRoleNames(c),a.setState({users:r,roles:c}));case 5:case"end":return s.stop()}}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.roles,c=t.isShow,s=this.user||{},i=r.a.createElement(h.a,{type:"primary",onClick:function(){return e.showAdd()}},"\u6dfb\u52a0\u7528\u6237");return r.a.createElement(oe.a,{title:i},r.a.createElement(le.a,{rowKey:"_id",dataSource:a,columns:this.columns,pagination:{defaultPageSize:Oe}}),r.a.createElement(ae.a,{title:s._id?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",visible:c,onOk:this.addOrUpdateUser,onCancel:function(){e.form.resetFields(),e.setState({isShow:!1})}},r.a.createElement(nt,{setForm:function(t){return e.form=t},roles:n,user:s})))}}]),t}(n.Component),ct=a(141),st=a.n(ct),it=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sales:[5,20,36,10,10,20],stores:[6,10,25,20,15,10]},a.update=function(){a.setState((function(e){return{sales:e.sales.map((function(e){return e+1})),stores:e.stores.reduce((function(e,t){return e.push(t-1),e}),[])}}))},a.getOption=function(e,t){return{title:{text:"\u5e93\u5b58\u9500\u91cf"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:e},{name:"\u5e93\u5b58",type:"bar",data:t}]}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores;return r.a.createElement("div",null,r.a.createElement(oe.a,{title:"2019-11-07",extra:r.a.createElement(h.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")},r.a.createElement(st.a,{option:this.getOption(t,a)})))}}]),t}(n.Component),ot=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sales:[5,20,36,10,10,20],stores:[6,10,25,20,15,10]},a.update=function(){a.setState((function(e){return{sales:e.sales.map((function(e){return e+1})),stores:e.stores.reduce((function(e,t){return e.push(t-1),e}),[])}}))},a.getOption=function(e,t){return{title:{text:"\u6298\u7ebf"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"line",data:e},{name:"\u5e93\u5b58",type:"line",data:t}]}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.sales,a=e.stores;return r.a.createElement("div",null,r.a.createElement(oe.a,null,r.a.createElement(h.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),r.a.createElement(oe.a,{title:"\u6298\u7ebf\u56fe\u4e00"},r.a.createElement(st.a,{option:this.getOption(t,a)})))}}]),t}(n.Component),lt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getOption=function(){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:234,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:1548,name:"\u641c\u7d22\u5f15\u64ce"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},a.getOption2=function(){return{backgroundColor:"#2c343c",title:{text:"\u6d4b\u8bd5\u6570\u636e",left:"center",top:20,textStyle:{color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:274,name:"\u8054\u76df\u5e7f\u544a"},{value:235,name:"\u89c6\u9891\u5e7f\u544a"},{value:400,name:"\u641c\u7d22\u5f15\u64ce"}].sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(oe.a,{title:"\u6d41\u91cf\u7edf\u8ba1\u4e00"},r.a.createElement(st.a,{option:this.getOption(),style:{height:300}})),r.a.createElement(oe.a,{title:"\u6d41\u91cf\u7edf\u8ba1\u4e8c"},r.a.createElement(st.a,{option:this.getOption2(),style:{height:300}})))}}]),t}(n.Component),ut=(a(378),a(116)),mt=(a(379),a(63)),pt=(a(1237),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).goHome=function(){a.props.history.replace("/admin/home")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(ut.a,{className:"not-found"},r.a.createElement(mt.a,{span:12,className:"left"}),r.a.createElement(mt.a,{span:12,className:"right"},r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"),r.a.createElement("div",null,r.a.createElement(h.a,{type:"primary",onClick:this.goHome},"\u56de\u5230\u9996\u9875"))))}}]),t}(n.Component)),dt=X.a.Footer,ht=X.a.Sider,ft=X.a.Content,gt=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=H.user;return console.log(e),e&&e._id?r.a.createElement(X.a,{style:{minHeight:"100%"}},r.a.createElement(ht,null,r.a.createElement(te,null)),r.a.createElement(X.a,null,r.a.createElement(se,null,"header"),r.a.createElement(ft,{style:{margin:20,backgroundColor:"#fff"}},r.a.createElement(d.d,null,r.a.createElement(d.a,{exact:!0,from:"/",to:"/admin/home"}),r.a.createElement(d.b,{path:"/admin/home",component:ie}),r.a.createElement(d.b,{path:"/admin/category",component:Ee}),r.a.createElement(d.b,{path:"/admin/product",component:Je}),r.a.createElement(d.b,{path:"/admin/role",component:$e}),r.a.createElement(d.b,{path:"/admin/user",component:rt}),r.a.createElement(d.b,{path:"/admin/charts/bar",component:it}),r.a.createElement(d.b,{path:"/admin/charts/line",component:ot}),r.a.createElement(d.b,{path:"/admin/charts/pie",component:lt}),r.a.createElement(d.b,{component:pt}))),r.a.createElement(dt,{style:{textAlign:"center",color:"#ccc"}},"\u63a8\u8350\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668,\u53ef\u4ee5\u83b7\u5f97\u66f4\u4f73\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c"))):r.a.createElement(d.a,{to:"/login"})}}]),t}(n.Component),yt=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login",component:Q}),r.a.createElement(d.b,{path:"/admin",component:gt})))}}]),t}(n.Component),bt=B.getUser();H.user=bt,s.a.render(r.a.createElement(yt,null),document.getElementById("root"))},545:function(e,t,a){e.exports=a(1238)},631:function(e,t,a){},714:function(e,t,a){},724:function(e,t,a){},725:function(e,t,a){},726:function(e,t,a){},929:function(e,t,a){}},[[545,1,2]]]);
//# sourceMappingURL=main.de0faba7.chunk.js.map