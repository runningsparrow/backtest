{"version":3,"sources":["api/ajax.js","api/index.js","utils/storageUtils.js","utils/memoryUtils.js","pages/login/login.jsx","config/menuConfig.js","components/left-nav/left-nav.jsx","utils/dateUtils.js","components/link-button/linkButton.jsx","components/header/header.jsx","pages/home/home.jsx","pages/category/add-form.jsx","pages/category/update-form.jsx","pages/category/category.jsx","utils/constants.js","pages/product/home.jsx","pages/product/pictures-wall.jsx","pages/product/rich-text-editor.jsx","pages/product/add-update.jsx","pages/product/detail.jsx","pages/product/product.jsx","pages/role/add-form.jsx","pages/role/jurisdiction-form.jsx","pages/role/role.jsx","pages/user/user-form.jsx","pages/user/user.jsx","pages/charts/bar.jsx","pages/charts/line.jsx","pages/charts/pie.jsx","pages/not-found/not-found.jsx","pages/admin/admin.jsx","App.js","index.js"],"names":["ajax","url","data","type","Promise","resolve","reject","axios","get","params","post","then","val","catch","err","message","error","reqLogin","username","password","reqCategorys","parentId","reqCategoryInfo","categoryId","reqAddCategorys","categoryName","reqUpdateCategory","reqProducts","pageNum","pageSize","reqSearchProducts","searchName","searchType","reqUpdateStatus","productId","status","reqDeleteImg","name","reqAddOrUpdateProduct","product","_id","reqRoles","reqAddRole","reqUpdateRole","role","reqUsers","reqDeleteUser","reqAddOrUpdateUser","user","reqWeather","city","jsonp","console","log","results","weather_data","dayPictureUrl","weather","saveUser","store","set","getUser","delUser","remove","Login","handleSubmit","e","preventDefault","props","form","validateFields","values","a","async","storageUtils","memoryUtils","history","replace","msg","validatorPwd","rule","value","callback","length","test","getFieldDecorator","this","className","onSubmit","Item","rules","required","whitespace","min","max","prefix","placeholder","validator","htmlType","Component","WrapLogin","create","menuList","title","key","icon","isPublic","children","SubMenu","LeftNav","getMenuNOdes_map","map","item","to","getMenuNOdes","path","location","pathname","reduce","pre","hasAuth","find","cItem","indexOf","openKey","push","menus","child","menuNodes","mode","theme","selectedKeys","defaultOpenKeys","withRouter","formateDate","time","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","LinkButton","Header","state","currentTime","now","getTime","intervalId","setInterval","setState","getWeather","getTitle","forEach","logOut","confirm","onOk","localStorage","clear","clearInterval","onClick","src","alt","Home","Option","AddForm","setForm","categorys","initialValue","c","UpdateForm","propType","PropTypes","string","isRequired","func","Category","loading","subCategorys","parentName","showStatus","showAdd","showUpdate","category","handleCancel","resetFields","updateCategory","getCategorys","addCategory","initColumns","columns","dataIndex","width","render","showSubCategorys","showCategorys","result","style","marginRight","extra","rowKey","dataSource","pagination","defaultPageSize","showQuickJumper","visible","onCancel","PAGE_SIZE","BASE_IMG_URL","ProductHome","total","products","price","updateStatus","getProducts","list","success","onChange","margin","event","target","bordered","current","getBase64","file","reader","FileReader","readAsDataURL","onload","onerror","PicturesWall","previewVisible","previewImage","fileList","handlePreview","preview","originFileObj","handleChange","response","getImgs","imgs","img","index","uid","uploadButton","action","accept","listType","onPreview","footer","RichTextEditor","editorState","EditorState","createEmpty","onEditorStateChange","getDeatil","draftToHtml","convertToRaw","getCurrentContent","html","detail","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","createWithContent","editorStyle","border","height","paddingLeft","TextArea","ProductAddUpdate","options","validatePrice","initOptions","label","isLeaf","isUpdate","pCategoryId","childOptions","option","loadData","selectedOptions","targetOption","submit","desc","categoryIds","pw","editor","goBack","React","createRef","fontSize","labelCol","span","wrapperCol","autoSize","minRows","maxRows","addonAfter","ref","ProductDetail","cName1","cName2","all","dangerouslySetInnerHTML","__html","Product","component","exact","TreeNode","JurisdictionForm","checkedKeys","getMenus","getTreeNodes","onCheck","nextProps","treeNodes","disabled","checkable","defaultExpandAll","Role","roles","isShowAdd","isShowJurisdiction","addRole","roleName","updateRole","authInfo","userStronge","jurisdiction","auth_time","auth_name","role_id","removeUser","initColumn","create_time","getRoles","onRow","rowSelection","selectedRowKeys","onSelect","UserForm","phone","email","User","users","isShow","roleNames","deleteUser","initRoleNames","addOrUpdateUser","getUsers","id","Bar","sales","stores","update","sale","getOption","text","tooltip","legend","xAxis","yAxis","series","Line","Pie","subtext","x","trigger","formatter","orient","left","radius","center","itemStyle","emphasis","shadowBlur","shadowOffsetX","shadowColor","getOption2","backgroundColor","top","textStyle","color","visualMap","show","inRange","colorLightness","sort","b","roseType","normal","labelLine","lineStyle","smooth","length2","animationType","animationEasing","animationDelay","idx","Math","random","NotFound","goHome","Footer","Sider","Content","Admin","minHeight","from","textAlign","App","ReactDOM","document","getElementById"],"mappings":"4XAKe,SAASA,IAAgC,IAA3BC,EAA0B,uDAAtB,GAAGC,EAAmB,uDAAd,GAAGC,EAAW,uDAAN,MAC7C,OAAO,IAAIC,SAAQ,SAACC,EAAQC,IAEZ,QAATH,EACWI,IAAMC,IAAIP,EAAI,CACpBQ,OAAOP,IAGDK,IAAMG,KAAKT,EAAIC,IAErBS,MAAK,SAAAC,GACTP,EAAQO,EAAIV,SACbW,OAAM,SAAAC,GAELC,EAAA,EAAQC,MAAM,kCAASF,EAAIC,eCfvC,IAEaE,EAAW,SAACC,EAASC,GAAV,OAAsBnB,EAAU,SAAS,CAACkB,WAASC,YAAU,SAGxEC,EAAe,SAACC,GAAD,OAAarB,EAAY,wBAAwB,CAACqB,cAEjEC,EAAkB,SAACC,GAAD,OAAcvB,EAAU,wBAAwB,CAACuB,gBAGnEC,EAAkB,SAACH,EAASI,GAAV,OAA0BzB,EAAY,uBAAuB,CAACyB,eAAaJ,YAAU,SAGvGK,EAAoB,SAACH,EAAWE,GAAZ,OAA4BzB,EAAY,0BAA0B,CAACuB,aAAWE,gBAAc,SAGhHE,EAAc,SAACC,EAAQC,GAAT,OAAoB7B,EAAU,uBAAuB,CAAC4B,UAAQC,cAI5EC,EAAoB,SAAC,GAAD,IAAEF,EAAF,EAAEA,QAAQC,EAAV,EAAUA,SAASE,EAAnB,EAAmBA,WAAWC,EAA9B,EAA8BA,WAA9B,OAA4ChC,EAAU,yBAAN,aAC7E4B,UACAC,YACCG,EAAYD,KAIJE,EAAkB,SAACC,EAAUC,GAAX,OAAsBnC,EAAU,+BAA+B,CAACkC,YAAUC,UAAQ,SAGpGC,EAAe,SAACC,GAAD,OAAUrC,EAAU,qBAAqB,CAACqC,QAAM,SAG/DC,EAAwB,SAACC,GAAD,OAAYvC,EAAU,oBAAoBuC,EAAQC,IAAI,SAAS,OAAOD,EAAQ,SAGtGE,EAAW,kBAAIzC,EAAU,sBAGzB0C,EAAa,SAACL,GAAD,OAAQrC,EAAU,mBAAmB,CAACqC,QAAM,SAGzDM,EAAgB,SAACC,GAAD,OAAQ5C,EAAU,sBAAsB4C,EAAK,SAG7DC,EAAW,SAACL,GAAD,OAAOxC,EAAU,oBAAoB,CAACwC,SAGjDM,EAAgB,SAACN,GAAD,OAAOxC,EAAU,sBAAsB,CAACwC,OAAK,SAG7DO,EAAqB,SAACC,GAAD,OAAShD,EAAU,iBAAiBgD,EAAKR,IAAI,SAAS,OAAOQ,EAAK,SAOvFC,EAAa,SAACC,GACvB,OAAO,IAAI9C,SAAQ,SAACC,EAAQC,GACxB,IAAML,EAAG,mEAA+DiD,EAA/D,4CACTC,IAAMlD,EAAI,IAAG,SAACa,EAAIZ,GAEd,GADAkD,QAAQC,IAAI,QAAQvC,EAAIZ,GACpBY,GAAuB,YAAhBZ,EAAKiC,OAIZpB,EAAA,EAAQC,MAAM,yDAJmB,CAAC,IAAD,EACDd,EAAKoD,QAAQ,GAAGC,aAAa,GAAtDC,EAD0B,EAC1BA,cAAcC,EADY,EACZA,QACrBpD,EAAQ,CAACmD,gBAAcC,oB,kBCnEzB,GAEVC,SAFU,SAEDV,GAELW,IAAMC,IALG,WAKUZ,IAGvBa,QAPU,WASN,OAAOF,IAAMnD,IAVJ,aAabsD,QAZU,WAaNH,IAAMI,OAdG,cCDH,G,cAAA,CACVf,KAAK,KCOHgB,E,2MACFC,aAAe,SAACC,GACZA,EAAEC,iBACF,EAAKC,MAAMC,KAAKC,gBAAe,SAAOxD,EAAKyD,GAAZ,mBAAAC,EAAAC,OAAA,mDACtB3D,EADsB,uBAGhBI,EAAqBqD,EAArBrD,SAASC,EAAYoD,EAAZpD,SAHO,WAAAqD,EAAA,MAIJvD,EAASC,EAASC,IAJd,OAMJ,KAFbjB,EAJiB,QAMfiC,QACJuC,EAAahB,SAASxD,EAAKA,MAC3ByE,EAAY3B,KAAK9C,EAAKA,KACtBkD,QAAQC,IAAIsB,EAAY3B,MACxB,EAAKoB,MAAMQ,QAAQC,QAAQ,gBAE3B9D,EAAA,EAAQC,MAAMd,EAAK4E,KAZA,sBAevB1B,QAAQC,IAAI,8BAfW,yC,EAuBnC0B,aAAe,SAACC,EAAKC,EAAMC,GACnBD,EAEKA,EAAME,OAAS,EACpBD,EAAS,2DACJD,EAAME,OAAS,GACpBD,EAAS,4DACH,iBAAiBE,KAAKH,GAG5BC,IAFAA,EAAS,oGANTA,EAAS,yC,wEAab,IACOG,EADMC,KAAKlB,MAAMC,KACjBgB,kBAEP,OACI,yBAAKE,UAAU,SACX,4BAAQA,UAAU,gBACd,4FAEJ,6BAASA,UAAU,iBACf,wDACA,uBAAMC,SAAUF,KAAKrB,aAAcsB,UAAU,cACzC,sBAAME,KAAN,KACKJ,EAAkB,WAAY,CAE3BK,MAAO,CACH,CAAEC,UAAU,EAAKC,YAAW,EAAM7E,QAAS,8CAC3C,CAAE8E,IAAK,EAAG9E,QAAS,yCACnB,CAAE+E,IAAK,GAAI/E,QAAS,4CAL3BsE,CASG,uBACAU,OAAQ,uBAAM5F,KAAK,SACnB6F,YAAY,yBAKpB,sBAAMP,KAAN,KAEQJ,EAAkB,WAAW,CACzBK,MAAM,CACF,CACIO,UAAUX,KAAKP,gBAH3BM,CAOI,uBACAU,OAAQ,uBAAM5F,KAAK,SACnBA,KAAK,WACL6F,YAAY,mBAKxB,sBAAMP,KAAN,KACI,uBAAQtF,KAAK,UAAU+F,SAAS,SAASX,UAAU,qBAAnD,kB,GAvFRY,aA0HLC,EADG,IAAKC,QAAL,CAAcrC,G,oCCxEjBsC,EAzDE,CACb,CACIC,MAAM,eACNC,IAAI,cACJC,KAAK,OACLC,UAAS,GAEb,CACIH,MAAM,eACNC,IAAI,kBACJC,KAAK,WACLE,SAAS,CACL,CACIJ,MAAM,2BACNC,IAAI,kBACJC,KAAK,QAET,CACIF,MAAM,2BACNC,IAAI,iBACJC,KAAK,UAIjB,CACIF,MAAM,2BACNC,IAAI,cACJC,KAAK,QAET,CACIF,MAAM,2BACNC,IAAI,cACJC,KAAK,UAET,CACIF,MAAM,2BACNC,IAAI,gBACJC,KAAK,aACLE,SAAS,CACL,CACIJ,MAAM,qBACNC,IAAI,oBACJC,KAAK,aAET,CACIF,MAAM,qBACNC,IAAI,qBACJC,KAAK,cAET,CACIF,MAAM,eACNC,IAAI,oBACJC,KAAK,gBC7CfG,G,OAAU,IAAKA,SAIfC,G,2MAMFC,iBAAmB,SAACR,GAChB,OAAOA,EAASS,KAAI,SAAAC,GAChB,OAAIA,EAAKL,SAWD,kBAACC,EAAD,CACIJ,IAAKQ,EAAKR,IACVD,MACA,8BACI,uBAAMpG,KAAM6G,EAAKP,OACrB,8BAAOO,EAAKT,SAGP,EAAKO,iBAAiBE,EAAKL,WAjBpC,sBAAMlB,KAAN,CAAWe,IAAKQ,EAAKR,KACjB,kBAAC,IAAD,CAAMS,GAAID,EAAKR,KACX,uBAAMrG,KAAM6G,EAAKP,OACjB,oD,EAwBxBS,aAAe,SAACZ,GACZ,IAAMa,EAAO,EAAK/C,MAAMgD,SAASC,SACjC,OAAOf,EAASgB,QAAO,SAACC,EAAIP,GAGpB,EAAKQ,QAAQR,KAETA,EAAKL,UAUSK,EAAKL,SAASc,MAAK,SAAAC,GAAK,OAA8B,IAA3BP,EAAKQ,QAAQD,EAAMlB,UAExD,EAAKoB,QAAUZ,EAAKR,KAExBe,EAAIM,KACA,kBAACjB,EAAD,CACIJ,IAAKQ,EAAKR,IACVD,MACA,8BACI,uBAAMpG,KAAM6G,EAAKP,OACrB,8BAAOO,EAAKT,SAGP,EAAKW,aAAaF,EAAKL,aAtBpCY,EAAIM,KACA,sBAAMpC,KAAN,CAAWe,IAAKQ,EAAKR,KACjB,kBAAC,IAAD,CAAMS,GAAID,EAAKR,KACX,uBAAMrG,KAAM6G,EAAKP,OACjB,8BAAOO,EAAKT,WAyBhC,OAAOgB,IACT,K,EAINC,QAAU,SAACR,GAAQ,IACRR,EAAgBQ,EAAhBR,IAAIE,EAAYM,EAAZN,SACLoB,EAAQnD,EAAY3B,KAAKJ,KAAKkF,MASpC,QAAe,UAREnD,EAAY3B,KAAK9B,WAQRwF,IAAkC,IAAtBoB,EAAMH,QAAQnB,OAE3CQ,EAAKL,YACDK,EAAKL,SAASc,MAAK,SAAAM,GAAK,OAAkC,IAA9BD,EAAMH,QAAQI,EAAMvB,S,oFAU7DlB,KAAK0C,UAAY1C,KAAK4B,aAAaZ,K,+BAGnC,IAAIa,EAAO7B,KAAKlB,MAAMgD,SAASC,SACzBO,EAAUtC,KAAKsC,QAIrB,OAHsC,IAAnCT,EAAKQ,QAAQ,oBACZR,EAAO,kBAGP,yBAAK5B,UAAU,YACX,kBAAC,IAAD,CAAM0B,GAAG,IAAI1B,UAAU,mBACnB,yDAEJ,uBACA0C,KAAK,SACLC,MAAM,OACNC,aAAc,CAAChB,GACfiB,gBAAiB,CAACR,IAEjBtC,KAAK0C,gB,GA1HA7B,aAsIPkC,eAAWxB,I,kBCjJnB,SAASyB,GAAYC,GACxB,IAAIA,EAAM,MAAO,GACjB,IAAIC,EAAO,IAAIC,KAAKF,GAChB,OAAOC,EAAKE,cAAgB,IAAMF,EAAKG,WAAY,IAAIH,EAAKI,UAC3D,IAAIJ,EAAKK,WAAW,IAAIL,EAAKM,aAAa,IAAIN,EAAKO,a,WCK7CC,G,iLAJP,OAAO,4CAAY1D,KAAKlB,MAAjB,CAAwBmB,UAAU,qB,GAFxBY,aCOnB8C,I,kNACFC,MAAQ,CACJC,YAAYb,GAAYG,KAAKW,OAC7B5F,cAAc,GACdC,QAAQ,I,EAEZ4F,QAAU,WACN,EAAKC,WAAaC,aAAY,WAC1B,IAAMJ,EAAcb,GAAYG,KAAKW,OACrC,EAAKI,SAAS,CAACL,kBAChB,M,EAEPM,WAAa,8BAAAjF,EAAAC,OAAA,kEAAAD,EAAA,MAC6BvB,EAAW,iBADxC,gBACFO,EADE,EACFA,cAAcC,EADZ,EACYA,QACrB,EAAK+F,SAAS,CAAChG,gBAAcC,YAFpB,sC,EAIbiG,SAAW,WAEP,IACInD,EADEY,EAAO,EAAK/C,MAAMgD,SAASC,SAYjC,OAVAf,EAASqD,SAAQ,SAAA3C,GACb,GAAGA,EAAKR,MAAQW,EACZZ,EAAQS,EAAKT,WACX,GAAGS,EAAKL,SAAS,CACnB,IAAMe,EAAQV,EAAKL,SAASc,MAAK,SAAAC,GAAK,OAAgC,IAA5BP,EAAKQ,QAAQD,EAAMlB,QAC1DkB,IACCnB,EAAQmB,EAAMnB,WAInBA,G,EAEXqD,OAAS,WACL,KAAMC,QAAQ,CACVtD,MAAO,4BACPuD,KAAK,WAEHnF,EAAY3B,KAAO,GACnB+G,aAAaC,QACb,EAAK5F,MAAMQ,QAAQC,QAAQ,c,mFASjCS,KAAK+D,UACL/D,KAAKmE,e,6CAMLQ,cAAc3E,KAAKgE,c,+BAEb,IAAD,EACuChE,KAAK4D,MAA1CC,EADF,EACEA,YAAY3F,EADd,EACcA,cAAcC,EAD5B,EAC4BA,QAC3BvC,EAAWyD,EAAY3B,KAAK9B,SAC5BqF,EAAQjB,KAAKoE,WACnB,OACI,yBAAKnE,UAAU,UACX,yBAAKA,UAAU,cACX,8CAAUrE,GACV,kBAAC,GAAD,CAAYgJ,QAAS5E,KAAKsE,QAA1B,iBAEJ,yBAAKrE,UAAU,iBACX,yBAAKA,UAAU,sBAAsBgB,GACrC,yBAAKhB,UAAU,uBACX,8BAAO4D,GACP,yBAAKgB,IAAK3G,EAAe4G,IAAI,WAC7B,8BAAO3G,U,GAxEV0C,cAgFNkC,eAAWY,IC3EXoB,I,wLARP,OACI,yBAAK9E,UAAU,QAAf,gF,GAHOY,c,uDCDbV,GAAO,IAAKA,KACZ6E,GAAS,KAAOA,OAEhBC,G,6LAOEjF,KAAKlB,MAAMoG,QAAQlF,KAAKlB,MAAMC,Q,+BAExB,IAAD,EACwBiB,KAAKlB,MAA3BqG,EADF,EACEA,UAAUpJ,EADZ,EACYA,SACVgE,EAAqBC,KAAKlB,MAAMC,KAAhCgB,kBACP,OACI,2BACI,kBAACI,GAAD,KAEQJ,EAAkB,WAAW,CACzBqF,aAAarJ,GADjBgE,CAGI,4BACI,kBAACiF,GAAD,CAAQrF,MAAM,KAAd,4BACCwF,EAAU1D,KAAI,SAAA4D,GAAC,OAAG,kBAACL,GAAD,CAAQrF,MAAO0F,EAAEnI,KAAMmI,EAAEtI,YAM5D,kBAACoD,GAAD,KAEQJ,EAAkB,eAAe,CAC7BqF,aAAa,GACbhF,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,sDAH/BsE,CAKG,uBAAOW,YAAY,sD,GAlCxBG,aA0CP,OAAKE,QAAL,CAAckE,I,mBC7CvB9E,GAAO,IAAKA,KAEZmF,G,6LAOExH,QAAQC,IAAIiC,KAAKlB,MAAMC,MACvBiB,KAAKlB,MAAMoG,QAAQlF,KAAKlB,MAAMC,Q,+BAExB,IACC5C,EAAgB6D,KAAKlB,MAArB3C,aACA4D,EAAqBC,KAAKlB,MAAMC,KAAhCgB,kBACP,OACI,2BACI,kBAAC,GAAD,KAEQA,EAAkB,eAAe,CAC7BqF,aAAajJ,EACbiE,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,sDAH/BsE,CAKG,uBAAOW,YAAY,sD,GAtBrBG,aAAnByE,GACKC,SAAW,CACdpJ,aAAaqJ,KAAUC,OAAOC,WAC9BR,QAAQM,KAAUG,KAAKD,YA2BhB,WAAK3E,QAAL,CAAcuE,ICyLdM,G,2MAlNXhC,MAAQ,CACNiC,SAAQ,EACRV,UAAU,GACVW,aAAa,GACb/J,SAAS,IACTgK,WAAW,GACXC,WAAW,G,EAIbC,QAAQ,WACN,EAAK/B,SAAS,CACZ8B,WAAW,K,EAKfE,WAAa,SAACC,GACZ,EAAKA,SAAWA,EAChB,EAAKjC,SAAS,CACZ8B,WAAW,K,EAKfI,aAAe,WAEb,EAAKrH,KAAKsH,cACV,EAAKnC,SAAS,CACZ8B,WAAW,K,EAKfM,eAAiB,WAGf,EAAKvH,KAAKC,gBAAe,SAAOxD,EAAIyD,GAAX,iBAAAC,EAAAC,OAAA,mDACnB3D,EADmB,uBAGrB,EAAK0I,SAAS,CACZ8B,WAAW,IAEP/J,EAAa,EAAKkK,SAASjJ,IAC1Bf,EAAgB8C,EAAhB9C,aAEP,EAAK4C,KAAKsH,cATW,WAAAnH,EAAA,MAUA9C,EAAkBH,EAAWE,IAV7B,OAWD,IAXC,OAWXU,QACR,EAAK0J,eAZc,yC,EAoB3BC,YAAc,oBAAAtH,EAAAC,OAAA,gDACZ,EAAKJ,KAAKC,gBAAe,SAAOxD,EAAIyD,GAAX,iBAAAC,EAAAC,OAAA,mDACnB3D,EADmB,uBAGrB,EAAK0I,SAAS,CACZ8B,WAAW,IAENjK,EAAyBkD,EAAzBlD,SAASI,EAAgB8C,EAAhB9C,aAEhB,EAAK4C,KAAKsH,cARW,WAAAnH,EAAA,MASAhD,EAAgBH,EAASI,IATzB,OAUD,GAVC,OAUXU,SACLd,IAAa,EAAK6H,MAAM7H,SACzB,EAAKwK,eAEL,EAAKA,aAAa,MAdD,wCADb,sC,EAwBdE,YAAc,WACZ,EAAKC,QAAU,CACb,CACEzF,MAAO,iCACP0F,UAAW,QAEb,CACE1F,MAAO,eACP2F,MAAM,IACNC,OAAO,SAACV,GAAD,OACL,8BACI,kBAAC,GAAD,CAAYvB,QAAS,kBAAK,EAAKsB,WAAWC,KAA1C,4BAEwB,MAAvB,EAAKvC,MAAM7H,SAAgB,kBAAC,GAAD,CAAY6I,QAAS,kBAAK,EAAKkC,iBAAiBX,KAAhD,kCAA8E,U,EAStHW,iBAAmB,SAACX,GAClB,EAAKjC,SAAS,CACZnI,SAASoK,EAASjJ,IAClB6I,WAAWI,EAASpJ,OACpB,WACA,EAAKwJ,mB,EAKTQ,cAAgB,WACd,EAAK7C,SAAS,CACZnI,SAAS,IACTgK,WAAW,GACXD,aAAa,M,EASjBS,aAAe,SAAOxK,GAAP,iBAAAmD,EAAAC,OAAA,uDAEb,EAAK+E,SAAS,CAAC2B,SAAQ,IACvB9J,EAAWA,GAAY,EAAK6H,MAAM7H,SAHrB,WAAAmD,EAAA,MAKQpD,EAAaC,IALrB,OAKPiL,EALO,OAOb,EAAK9C,SAAS,CAAC2B,SAAQ,IAEF,IAAlBmB,EAAOnK,QACFsI,EAAY6B,EAAOpM,KACT,MAAbmB,EACD,EAAKmI,SAAS,CACZiB,cAIF,EAAKjB,SAAS,CACZ4B,aAAaX,KAKjB1J,EAAA,EAAQC,MAAM,oDAvBH,sC,oFA6BbsE,KAAKyG,gB,0CAILzG,KAAKuG,iB,+BAGG,IAAD,SAC+DvG,KAAK4D,MAAtEuB,EADE,EACFA,UAAUU,EADR,EACQA,QAAQC,EADhB,EACgBA,aAAa/J,EAD7B,EAC6BA,SAASgK,EADtC,EACsCA,WAAWC,EADjD,EACiDA,WAClDG,EAAWnG,KAAKmG,UAAY,GAC5BlF,EAAoB,MAAZlF,EAAgB,uCAC5B,8BACE,kBAAC,GAAD,CAAY6I,QAAS5E,KAAK+G,eAA1B,wCACA,uBAAMlM,KAAK,cAAcoM,MAAO,CAACC,YAAY,KAC7C,8BAAOnB,IAGLoB,EACF,uBAAQtM,KAAK,UAAU+J,QAAS5E,KAAKiG,SACjC,uBAAMpL,KAAK,SADf,gBAKJ,OACI,wBAAMoG,MAAOA,EAAOkG,MAAOA,GACvB,wBACEC,OAAO,MACPvB,QAASA,EACTwB,WAAuB,MAAXtL,EAAeoJ,EAAUW,EACrCY,QAAS1G,KAAK0G,QACdY,WAAY,CAACC,gBAAgB,EAAEC,iBAAgB,KAEjD,wBACEvG,MAAM,2BACNwG,QAAwB,IAAfzB,EACTxB,KAAMxE,KAAKwG,YACXkB,SAAU1H,KAAKoG,cAEf,kBAAC,GAAD,CAASjB,UAAWA,EAAWpJ,SAAUA,EAAUmJ,QAAW,SAACnG,GAAQ,EAAKA,KAAOA,MAGrF,wBACEkC,MAAM,2BACNwG,QAAwB,IAAfzB,EACTxB,KAAMxE,KAAKsG,eACXoB,SAAU1H,KAAKoG,cAEf,kBAAC,GAAD,CAAYjK,aAAcgK,EAASpJ,KAAMmI,QAAW,SAACnG,GAAQ,EAAKA,KAAOA,W,GA3MlE8B,aCPV8G,GAAY,EACZC,GAAe,gCCCtB5C,GAAS,KAAOA,OA2IP6C,G,2MAxIXjE,MAAQ,CACJkE,MAAM,EACNC,SAAS,GACTlC,SAAQ,EACRpJ,WAAW,GACXC,WAAW,e,EAGf+J,YAAc,WACV,EAAKC,QAAU,CACX,CACEzF,MAAO,2BACP0F,UAAW,QAEb,CACI1F,MAAO,2BACP0F,UAAW,QAEf,CACI1F,MAAO,eACP0F,UAAW,QACXE,OAAO,SAACmB,GAAD,MAAS,SAAIA,IAExB,CACI/G,MAAO,eAEP2F,MAAM,IACNC,OAAO,SAAC5J,GAAW,IACRJ,EAAcI,EAAdJ,OAAOK,EAAOD,EAAPC,IACd,OACI,8BACI,uBAAQrC,KAAK,UAAU+J,QAAS,kBAAK,EAAKqD,aAAa/K,EAAa,IAATL,EAAW,EAAE,KAAgB,IAAXA,EAAe,eAAO,gBACnG,8BAAkB,IAAXA,EAAe,eAAO,yBAK7C,CACEoE,MAAO,eACP2F,MAAM,IACNC,OAAO,SAAC5J,GAAD,OACL,8BACI,kBAAC,GAAD,CAAY2H,QAAS,kBAAK,EAAK9F,MAAMQ,QAAQiD,KAAK,wBAAwB,CAACtF,cAA3E,gBACA,kBAAC,GAAD,CAAY2H,QAAS,kBAAK,EAAK9F,MAAMQ,QAAQiD,KAAK,0BAA0BtF,KAA5E,qB,EAQhBiL,YAAc,SAAO5L,GAAP,2BAAA4C,EAAAC,OAAA,mDACV,EAAK7C,QAAUA,EACf,EAAK4H,SAAS,CAAC2B,SAAQ,IAFb,EAGsB,EAAKjC,MAA9BnH,EAHG,EAGHA,WAAWC,EAHR,EAGQA,YAGfD,EANO,kCAAAyC,EAAA,MAQS1C,EAAkB,CAACF,UAAQC,SAASoL,GAAUlL,aAAWC,gBARlE,OAQNsK,EARM,iDAAA9H,EAAA,MAUS7C,EAAYC,EAAQqL,KAV7B,QAUNX,EAVM,eAYV,EAAK9C,SAAS,CAAC2B,SAAQ,IACF,IAAlBmB,EAAOnK,SAAa,EAEEmK,EAAOpM,KAArBkN,EAFY,EAEZA,MAAMK,EAFM,EAENA,KACb,EAAKjE,SAAS,CACV4D,QACAC,SAASI,KAlBP,uC,EAwBdF,aAAe,SAAOrL,EAAUC,GAAjB,SAAAqC,EAAAC,OAAA,kEAAAD,EAAA,MACUvC,EAAgBC,EAAUC,IADpC,OAEU,IAFV,OAEDA,SACNpB,EAAA,EAAQ2M,QAAQ,wCAChB,EAAKF,YAAY,EAAK5L,UAJf,sC,oFAQX0D,KAAKyG,gB,0CAILzG,KAAKkI,YAAY,K,+BAGX,IAAD,SAEkDlI,KAAK4D,MAArDmE,EAFF,EAEEA,SAASD,EAFX,EAEWA,MAAMjC,EAFjB,EAEiBA,QAAQpJ,EAFzB,EAEyBA,WAAWC,EAFpC,EAEoCA,WACnCuE,EACF,8BACI,wBAAQtB,MAAOjD,EAAYuK,MAAO,CAACL,MAAM,KAAMyB,SAAU,SAAA1I,GAAK,OAAE,EAAKuE,SAAS,CAACxH,WAAWiD,MACtF,kBAAC,GAAD,CAAQA,MAAM,eAAd,kCACA,kBAAC,GAAD,CAAQA,MAAM,eAAd,mCAEJ,uBACIe,YAAY,qBACZuG,MAAO,CAACL,MAAM,IAAI0B,OAAO,UACzB3I,MAAOlD,EACP4L,SAAU,SAAAE,GAAK,OAAG,EAAKrE,SAAS,CAACzH,WAAW8L,EAAMC,OAAO7I,WAE7D,uBAAQ9E,KAAK,UAAU+J,QAAS,kBAAK,EAAKsD,YAAY,KAAtD,iBAGFf,EACF,uBAAQtM,KAAK,UAAU+J,QAAS,kBAAI,EAAK9F,MAAMQ,QAAQiD,KAAK,6BACxD,uBAAM1H,KAAK,SADf,4BAMJ,OACI,wBAAMoG,MAAOA,EAAOkG,MAAOA,GACvB,wBACIsB,UAAQ,EACRrB,OAAO,MACPvB,QAASA,EACTwB,WAAYU,EACZrB,QAAS1G,KAAK0G,QACdY,WAAY,CACRoB,QAAQ1I,KAAK1D,QACbwL,QACAP,gBAAgBI,GAChBH,iBAAgB,EAChBa,SAASrI,KAAKkI,oB,GAjIZrH,a,2DCD1B,SAAS8H,GAAUC,GACjB,OAAO,IAAI9N,SAAQ,SAACC,EAASC,GAC3B,IAAM6N,EAAS,IAAIC,WACnBD,EAAOE,cAAcH,GACrBC,EAAOG,OAAS,kBAAMjO,EAAQ8N,EAAO7B,SACrC6B,EAAOI,QAAU,SAAAvN,GAAK,OAAIV,EAAOU,O,IAiHtBwN,G,YAjGb,WAAYpK,GAAO,IAAD,uBAChB,4CAAMA,KAPR8E,MAAQ,CACNuF,gBAAgB,EAChBC,aAAc,GACdC,SAAU,IAGM,EAsBlBjD,aAAe,kBAAM,EAAKlC,SAAS,CAAEiF,gBAAgB,KAtBnC,EAwBlBG,cAAgB,SAAMV,GAAN,SAAA1J,EAAAC,OAAA,mDAETyJ,EAAKjO,KAAQiO,EAAKW,QAFT,kCAAArK,EAAA,MAGSyJ,GAAUC,EAAKY,gBAHxB,OAGZZ,EAAKW,QAHO,cAMd,EAAKrF,SAAS,CACZkF,aAAcR,EAAKjO,KAAOiO,EAAKW,QAC/BJ,gBAAgB,IARJ,sCAxBE,EAwClBM,aAAe,qCAAAvK,EAAAC,OAAA,mDAASyJ,EAAT,EAASA,KAAKS,EAAd,EAAcA,SACR,SAAhBT,EAAK/L,OADK,gBAGY,KADfmK,EAAS4B,EAAKc,UACV7M,QACRpB,EAAA,EAAQ2M,QAAQ,wCADK,EAEFpB,EAAOpM,KAAnBmC,EAFc,EAEdA,KAAKpC,EAFS,EAETA,KACZiO,EAAOS,EAASA,EAASxJ,OAAO,IAC3B9C,KAAOA,EACZ6L,EAAKjO,IAAMA,GAEXc,EAAA,EAAQ2M,QAAQ,wCAVT,0BAYY,YAAhBQ,EAAK/L,OAZD,mCAAAqC,EAAA,MAaUpC,EAAa8L,EAAK7L,OAb5B,OAcU,IAdV,OAcAF,OACTpB,EAAA,EAAQ2M,QAAQ,wCAEhB3M,EAAA,EAAQC,MAAM,wCAjBL,QAoBb,EAAKwI,SAAS,CAAEmF,aAChBvL,QAAQC,IAAIsL,GArBC,uCAxCG,EAiElBM,QAAU,WACR,OAAO,EAAK/F,MAAMyF,SAAS5H,KAAI,SAAAmH,GAAI,OAAIA,EAAK7L,SAhE5C,IAAIsM,EAAW,GAERO,EAAQ,EAAK9K,MAAb8K,KAJS,OAKZA,GAAQA,EAAK/J,OAAO,IACtBwJ,EAAWO,EAAKnI,KAAI,SAACoI,EAAIC,GAAL,MAAc,CAChCC,KAAKD,EACL/M,KAAK8M,EACLhN,OAAO,OACPlC,IAAIiN,GAAaiC,OAIrB,EAAKjG,MAAQ,CACXuF,gBAAe,EACfC,aAAa,GACbC,YAjBc,E,sEAqER,IAAD,EAC4CrJ,KAAK4D,MAAhDuF,EADD,EACCA,eAAgBC,EADjB,EACiBA,aAAcC,EAD/B,EAC+BA,SAChCW,EACJ,6BACE,uBAAMnP,KAAK,SACX,yBAAKoF,UAAU,mBAAf,WAGJ,OACE,6BACE,wBACEgK,OAAO,qBACPC,OAAO,UACPnN,KAAK,QACLoN,SAAS,eACTd,SAAUA,EACVe,UAAWpK,KAAKsJ,cAChBjB,SAAUrI,KAAKyJ,cAEdJ,EAASxJ,QAAU,EAAI,KAAOmK,GAEjC,wBAAOvC,QAAS0B,EAAgBkB,OAAQ,KAAM3C,SAAU1H,KAAKoG,cAC3D,yBAAKtB,IAAI,UAAUmC,MAAO,CAAEL,MAAO,QAAU/B,IAAKuE,U,GAvGjCvI,a,8DCwCZyJ,I,mBAtCX,WAAYxL,GAAQ,IAAD,uBACf,4CAAMA,KALV8E,MAAQ,CACJ2G,YAAaC,eAAYC,eAGV,EAgBnBC,oBAAsB,SAACH,GACnB,EAAKrG,SAAS,CACVqG,iBAlBW,EAsBnBI,UAAY,WAER,OAAOC,KAAYC,wBAAa,EAAKjH,MAAM2G,YAAYO,uBAtBvD,IAAMC,EAAO,EAAKjM,MAAMkM,OACxB,GAAID,EAAM,CACN,IAAME,EAAeC,KAAYH,GACjC,GAAIE,EAAc,CACd,IAAME,EAAeC,gBAAaC,qBAAqBJ,EAAaK,eAC9Df,EAAcC,eAAYe,kBAAkBJ,GAClD,EAAKvH,MAAQ,CACb2G,gBATO,S,sEA0BT,IACFA,EAAgBvK,KAAK4D,MAArB2G,YACJ,OACI,kBAAC,UAAD,CACIA,YAAaA,EACbiB,YAAa,CAACC,OAAO,kBAAkBC,OAAO,IAAIC,YAAY,IAC9DjB,oBAAqB1K,KAAK0K,0B,GAzCb7J,cCFtBV,G,IAAAA,KACAyL,G,IAAAA,SAEDC,G,YAKF,WAAY/M,GAAO,IAAD,8BACd,4CAAMA,KALV8E,MAAQ,CACJkI,QAAQ,IAGM,EAQlBC,cAAgB,SAACrM,EAAKC,EAAMC,GACf,EAAND,EAAU,EACTC,IAEAA,EAAS,0CAZC,EAgBlBoM,YAAc,SAAO7G,GAAP,2BAAAjG,EAAAC,OAAA,mDAEJ2M,EAAU3G,EAAU1D,KAAI,SAAA4D,GAAC,MAAI,CAC/B1F,MAAO0F,EAAEnI,IACT+O,MAAO5G,EAAEtI,KACTmP,QAAQ,MALF,kBAQHC,EARG,EAQHA,SAASlP,EARN,EAQMA,QACTmP,EAA0BnP,EAA1BmP,YAA0BnP,EAAdhB,YAChBkQ,GAA4B,MAAhBC,EAVL,mCAAAlN,EAAA,MAYoB,EAAKqH,aAAa6F,IAZtC,OAYDtG,EAZC,OAcDuG,EAAevG,EAAarE,KAAI,SAAA4D,GAAC,MAAG,CACrC1F,MAAO0F,EAAEnI,IACT+O,MAAO5G,EAAEtI,KACTmP,QAAQ,MAISJ,EAAQ3J,MAAK,SAAAmK,GAAM,OAAEA,EAAO3M,QAAUyM,KAG9C/K,SAAWgL,EAxBlB,QA0BV,EAAKnI,SAAS,CACV4H,YA3BM,uCAhBI,EAgDlBvF,aAAe,SAAOxK,GAAP,iBAAAmD,EAAAC,OAAA,kEAAAD,EAAA,MACUpD,EAAaC,IADvB,UAEU,KADfiL,EADK,QAEDnK,OAFC,oBAGDsI,EAAY6B,EAAOpM,KACT,MAAbmB,EAJI,gBAKH,EAAKiQ,YAAY7G,GALd,gDAOIA,GAPJ,QASP,EAAK6G,YAAY7G,GATV,uCAhDG,EA8DlBoH,SAAW,SAAMC,GAAN,mBAAAtN,EAAAC,OAAA,uDAEDsN,EAAeD,EAAgBA,EAAgB3M,OAAS,IAEjDgG,SAAU,EAJhB,WAAA3G,EAAA,MAOoB,EAAKqH,aAAakG,EAAa9M,QAPnD,OAODmG,EAPC,OAQP2G,EAAa5G,SAAU,EACpBC,GAAgBA,EAAajG,OAAS,GAE/BwM,EAAevG,EAAarE,KAAI,SAAA4D,GAAC,MAAI,CACvC1F,MAAO0F,EAAEnI,IACT+O,MAAO5G,EAAEtI,KACTmP,QAAQ,MAGZO,EAAapL,SAAWgL,GAExBI,EAAaP,QAAS,EAG1B,EAAKhI,SAAS,CACd4H,QAAQ,aAAK,EAAKlI,MAAMkI,WAvBjB,sCA9DO,EAyFlBY,OAAS,WAEL,EAAK5N,MAAMC,KAAKC,gBAAe,SAAOtD,EAAMuD,GAAb,+BAAAC,EAAAC,OAAA,mDACvBzD,EADuB,wBAIhBqB,EAA+BkC,EAA/BlC,KAAK4P,EAA0B1N,EAA1B0N,KAAK3E,EAAqB/I,EAArB+I,MAES,KAFH4E,EAAe3N,EAAf2N,aAER/M,QACXuM,EAAc,IACdnQ,EAAa2Q,EAAY,KAEzBR,EAAcQ,EAAY,GAC1B3Q,EAAa2Q,EAAY,IAEvBhD,EAAO,EAAKiD,GAAGnE,QAAQiB,UACvBqB,EAAS,EAAK8B,OAAOpE,QAAQiC,YAC7B1N,EAAU,CAACF,OAAK4P,OAAK3E,QAAM4B,OAAKoB,SAAOoB,cAAYnQ,cAGrD,EAAKkQ,WACLlP,EAAQC,IAAM,EAAKD,QAAQC,KAnBR,WAAAgC,EAAA,MAsBFlC,EAAsBC,IAtBpB,OAwBF,IAxBE,OAwBbJ,QACNpB,EAAA,EAAQ2M,QAAR,UAAmB,EAAK+D,SAAS,eAAK,eAAtC,6BACA,EAAKrN,MAAMQ,QAAQyN,UAEnBtR,EAAA,EAAQC,MAAR,UAAiB,EAAKyQ,SAAS,eAAK,eAApC,6BA5BmB,0CAxF/B,EAAKU,GAAKG,IAAMC,YAEhB,EAAKH,OAASE,IAAMC,YALN,E,iFAgIdjN,KAAKuG,aAAa,O,2CAGlB,IAAMtJ,EAAU+C,KAAKlB,MAAMgD,SAAS8B,MAGpC5D,KAAKmM,WAAalP,EAClB+C,KAAK/C,QAAUA,GAAW,K,+BAEpB,IAAD,OACEkP,EAAoBnM,KAApBmM,SAASlP,EAAW+C,KAAX/C,QACTmP,EAAsCnP,EAAtCmP,YAAYnQ,EAA0BgB,EAA1BhB,WAAW2N,EAAe3M,EAAf2M,KAAKoB,EAAU/N,EAAV+N,OAC/B4B,EAAc,GACfT,IACoB,MAAhBC,EACCQ,EAAYrK,KAAKtG,IAEjB2Q,EAAYrK,KAAK6J,GACjBQ,EAAYrK,KAAKtG,KAIzB,IAIMgF,EACF,8BACI,kBAAC,GAAD,KACI,uBAAMpG,KAAK,aAAaoM,MAAO,CAACC,YAAY,GAAGgG,SAAS,IACpDtI,QAAS,kBAAI,EAAK9F,MAAMQ,QAAQyN,aAExC,8BAAOZ,EAAS,2BAAO,6BAGxBpM,EAAqBC,KAAKlB,MAAMC,KAAhCgB,kBACP,OACI,wBAAMkB,MAAOA,EAAOhB,UAAU,kBAC1B,sBAhBe,CACnBkN,SAAU,CAACC,KAAK,GAChBC,WAAY,CAACD,KAAK,IAeV,kBAAC,GAAD,CAAMnB,MAAM,4BAEJlM,EAAkB,OAAO,CACrBqF,aAAanI,EAAQF,KACrBqD,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,sDAH/BsE,CAKG,uBAAOW,YAAY,+BAG9B,kBAAC,GAAD,CAAMuL,MAAM,4BAEJlM,EAAkB,OAAO,CACrBqF,aAAanI,EAAQ0P,KACrBvM,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,sDAH/BsE,CAKG,kBAAC6L,GAAD,CAAUlL,YAAY,6CAAU4M,SAAU,CAAEC,QAAS,EAAGC,QAAS,OAI5E,kBAAC,GAAD,CAAMvB,MAAM,4BAEJlM,EAAkB,QAAQ,CACtBqF,aAAanI,EAAQ+K,MACrB5H,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,oDACvB,CAACkF,UAAUX,KAAK+L,iBAJxBhM,CAMG,uBAAOlF,KAAK,SAAS6F,YAAY,2BAAO+M,WAAW,aAI9D,kBAAC,GAAD,CAAMxB,MAAM,4BAEJlM,EAAkB,cAAc,CAC5BqF,aAAawH,EACbxM,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,sDAH/BsE,CAKG,wBACC+L,QAAS9L,KAAK4D,MAAMkI,QACpBS,SAAUvM,KAAKuM,aAI3B,kBAAC,GAAD,CAAMN,MAAM,4BACR,kBAAC,GAAD,CAAcyB,IAAK1N,KAAK6M,GAAIjD,KAAMA,KAEtC,kBAAC,GAAD,CAAMqC,MAAM,2BAAOkB,SAAU,CAACC,KAAK,GAAIC,WAAY,CAACD,KAAK,KACrD,kBAAC,GAAD,CAAgBM,IAAK1N,KAAK8M,OAAQ9B,OAAQA,KAE9C,kBAAC,GAAD,KACI,uBAAQnQ,KAAK,UAAU+J,QAAS,kBAAM,EAAK8H,WAA3C,uB,GAjOO7L,aAyOhB,OAAKE,QAAL,CAAc8K,I,mBC7OvB1L,GAAO,KAAKA,KAwFHwN,G,2MApFX/J,MAAM,CACFgK,OAAO,GACPC,OAAO,I,8KAK0B7N,KAAKlB,MAAMgD,SAAS8B,MAAM3G,QAApDmP,E,EAAAA,YAAYnQ,E,EAAAA,WACA,MAAhBmQ,E,0CACsBpQ,EAAgBC,I,OAA/B+K,E,OACA4G,EAAS5G,EAAOpM,KAAKmC,KAC3BiD,KAAKkE,SAAS,CAAC0J,W,kDAUO9S,QAAQgT,IAAI,CAAC9R,EAAgBoQ,GAAapQ,EAAgBC,M,QAA1E+B,E,OACA4P,EAAS5P,EAAQ,GAAGpD,KAAKmC,KACzB8Q,EAAS7P,EAAQ,GAAGpD,KAAKmC,KAC/BiD,KAAKkE,SAAS,CAAC0J,SAAOC,W,iFAIpB,IAAD,SACiC7N,KAAKlB,MAAMgD,SAAS8B,MAAM3G,QAAzDF,EADF,EACEA,KAAK4P,EADP,EACOA,KAAK3E,EADZ,EACYA,MAAM4B,EADlB,EACkBA,KAAKoB,EADvB,EACuBA,OADvB,EAEmBhL,KAAK4D,MAAtBgK,EAFF,EAEEA,OAAOC,EAFT,EAESA,OAER5M,EACF,8BACI,kBAAC,GAAD,KACI,uBAAMpG,KAAK,aAAaoM,MAAO,CAACC,YAAY,GAAGgG,SAAS,IACpDtI,QAAS,kBAAI,EAAK9F,MAAMQ,QAAQyN,aAExC,2DAGR,OACI,wBAAM9L,MAAOA,EAAOhB,UAAU,kBAC1B,4BACI,kBAAC,GAAD,KACI,0BAAMA,UAAU,QAAhB,6BACA,8BAAOlD,IAEX,kBAAC,GAAD,KACI,0BAAMkD,UAAU,QAAhB,6BACA,8BAAO0M,IAEX,kBAAC,GAAD,KACI,0BAAM1M,UAAU,QAAhB,6BACA,8BAAO+H,IAEX,kBAAC,GAAD,KACI,0BAAM/H,UAAU,QAAhB,6BACA,8BAAO2N,EAAP,IAAgBC,EAAO,SAAMA,EAAS,KAE1C,kBAAC,GAAD,KACI,0BAAM5N,UAAU,QAAhB,6BACA,8BAEO2J,EAAKnI,KAAI,SAAAoI,GAAG,OACR,yBACC3I,IAAK2I,EACL5J,UAAU,cACV4E,IAAK+C,GAAciC,SAMnC,kBAAC,GAAD,KACI,0BAAM5J,UAAU,QAAhB,6BACA,0BAAM8N,wBAAyB,CAACC,OAAOhD,Y,GA9EnCnK,aCcboN,I,wLAXP,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOpM,KAAK,iBAAiBqM,UAAWrG,GAAasG,OAAK,IAC1D,kBAAC,IAAD,CAAOtM,KAAK,0BAA0BqM,UAAWrC,KACjD,kBAAC,IAAD,CAAOhK,KAAK,wBAAwBqM,UAAWP,KAC/C,kBAAC,IAAD,CAAUhM,GAAG,wB,GAPPd,cCJhBV,GAAO,IAAKA,KAEZ8E,G,6LAKEjF,KAAKlB,MAAMoG,QAAQlF,KAAKlB,MAAMC,Q,+BAExB,IACCgB,EAAqBC,KAAKlB,MAAMC,KAAhCgB,kBAKP,OACI,2BACI,kBAAC,GAAD,eAAMkM,MAAM,4BANG,CACnBkB,SAAU,CAACC,KAAK,GAChBC,WAAY,CAACD,KAAK,MAMNrN,EAAkB,WAAW,CACzBqF,aAAa,GACbhF,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,sDAH/BsE,CAKG,uBAAOW,YAAY,sD,GAtBxBG,aA8BP,OAAKE,QAAL,CAAckE,I,mBC/BvB9E,GAAO,IAAKA,KACViO,G,KAAAA,SAEaC,G,YAKjB,WAAYvP,GAAO,IAAD,uBACd,4CAAMA,KAQV8E,MAAQ,CACJ0K,YAAY,IAVE,EAclBC,SAAW,kBAAI,EAAK3K,MAAM0K,aAdR,EAelBE,aAAe,SAACxN,GACZ,OAAOA,EAASgB,QAAO,SAACC,EAAIP,GAMxB,OALAO,EAAIM,KACA,kBAAC6L,GAAD,CAAUnN,MAAOS,EAAKT,MAAOC,IAAKQ,EAAKR,KAClCQ,EAAKL,SAAS,EAAKmN,aAAa9M,EAAKL,UAAU,OAGjDY,IACT,KAvBY,EA0BlBwM,QAAU,SAAAH,GACNxQ,QAAQC,IAAI,cAAcuQ,GAC1B,EAAKpK,SAAS,CAACoK,iBA5BD,IAEP9L,EAAS,EAAK1D,MAAMxB,KAApBkF,MAFO,OAId,EAAKoB,MAAQ,CACT0K,YAAY9L,GALF,E,uFAiCQkM,GACtB,IAAMlM,EAAQkM,EAAUpR,KAAKkF,MAC7BxC,KAAKkE,SAAS,CACVoK,YAAY9L,M,2CAKhBxC,KAAK2O,UAAY3O,KAAKwO,aAAaxN,K,+BAGnC,IAIO1D,EAAQ0C,KAAKlB,MAAbxB,KACAgR,EAAetO,KAAK4D,MAApB0K,YACP,OACI,sBAPmB,CACnBnB,SAAU,CAACC,KAAK,GAChBC,WAAY,CAACD,KAAK,KAMd,kBAAC,GAAD,CAAMnB,MAAM,4BACT,uBAAOtM,MAAOrC,EAAKP,KAAM6R,UAAQ,KAEpC,wBACIC,WAAS,EACTC,kBAAkB,EAClBR,YAAaA,EAIbG,QAASzO,KAAKyO,SAEd,kBAACL,GAAD,CAAUnN,MAAM,2BAAOC,IAAI,OACtBlB,KAAK2O,iB,GAtEgB9N,aCqM/BkO,G,YA1LX,WAAYjQ,GAAO,IAAD,8BACd,4CAAMA,KARV8E,MAAQ,CACJoL,MAAM,GACN1R,KAAK,GACL2R,WAAU,EACVC,oBAAmB,GAGL,EAKlB9I,aAAe,aALG,EAYlB+I,QAAU,WAEN,EAAKpQ,KAAKC,gBAAe,SAAOxD,EAAIyD,GAAX,mBAAAC,EAAAC,OAAA,mDACrBrB,QAAQC,IAAI,EAAKgB,MAEZvD,EAHgB,uBAIjB,EAAK0I,SAAS,CAAC+K,WAAU,IAElBG,EAAYnQ,EAAZmQ,SACP,EAAKrQ,KAAKsH,cAPO,WAAAnH,EAAA,MAUI9B,EAAWgS,IAVf,OAWK,KADhBpI,EAVW,QAWNnK,QACPpB,EAAA,EAAQ2M,QAAQ,4BAGV9K,EAAO0J,EAAOpM,KAOpB,EAAKsJ,UAAS,SAAAN,GAAK,MAAG,CAClBoL,MAAM,CAAC,EAAKpL,MAAMoL,MAAM1R,QAG5B7B,EAAA,EAAQC,MAAM,4BA1BD,yCAdX,EA+ClB2T,WAAa,8BAAAnQ,EAAAC,OAAA,uDACT,EAAK+E,SAAS,CAACgL,oBAAmB,IAC5BI,EAAWC,EAAYhR,UACvBjB,EAAO,EAAKsG,MAAMtG,KAElBkF,EAAQ,EAAKgN,aAAa9G,QAAQ6F,WACxCjR,EAAKkF,MAAQA,EACblF,EAAKmS,WAAY,IAAItM,MAAOY,UAC5BzG,EAAKoS,UAAYJ,EAAS1T,SARjB,WAAAsD,EAAA,MAWY7B,EAAcC,IAX1B,OAYW,IAZX,OAYET,OAEHS,EAAKJ,MAAQmC,EAAY3B,KAAKiS,SAC9BtQ,EAAY3B,KAAO,GACnB0B,EAAawQ,aACb,EAAK9Q,MAAMQ,QAAQC,QAAQ,UAC3B9D,EAAA,EAAQ2M,QAAQ,iGAEhB3M,EAAA,EAAQ2M,QAAQ,oDAChB,EAAKlE,SAAS,CACV8K,MAAM,aAAI,EAAKpL,MAAMoL,UAK7BvT,EAAA,EAAQC,MAAM,oDA3BT,uCA/CK,EA8ElBmU,WAAa,WACT,EAAKnJ,QAAU,CACX,CACIzF,MAAM,2BACN0F,UAAU,QAEd,CACI1F,MAAM,2BACN0F,UAAU,cACVE,OAAO,SAACiJ,GAAD,OAAe9M,GAAY8M,KAEtC,CACI7O,MAAM,2BACN0F,UAAU,YACVE,OAAO7D,IAEX,CACI/B,MAAM,qBACN0F,UAAU,eAhGJ,EAsGlBoJ,SAAW,4BAAA7Q,EAAAC,OAAA,kEAAAD,EAAA,MACc/B,KADd,OAEe,KADhB6J,EADC,QAEInK,SACDmS,EAAQhI,EAAOpM,KACrB,EAAKsJ,SAAS,CACV8K,WALD,sCAtGO,EAgHlBgB,MAAQ,SAAC1S,GACL,MAAO,CACHsH,QAAQ,SAAA2D,GACJzK,QAAQC,IAAI,cAAcT,GAC1B,EAAK4G,SAAS,CACV5G,YAnHZ,EAAKkS,aAAexC,IAAMC,YAFZ,E,kFA4HdjN,KAAK6P,e,0CAIL7P,KAAK+P,a,+BAGC,IAAD,SAC6C/P,KAAK4D,MAAhDoL,EADF,EACEA,MAAM1R,EADR,EACQA,KAAK2R,EADb,EACaA,UAAUC,EADvB,EACuBA,mBACtBjO,EACF,8BACI,uBAAQpG,KAAK,UAAU+J,QAAS,kBAAI,EAAKV,SAAS,CAAC+K,WAAU,MAA7D,4BADJ,YAEI,uBAAQpU,KAAK,UAAU+J,QAAS,kBAAI,EAAKV,SAAS,CAACgL,oBAAmB,KAAQN,UAAWtR,EAAKJ,KAA9F,yCAIR,OACI,wBAAM+D,MAAOA,GACT,wBACImG,OAAO,MAEPC,WAAY2H,EACZtI,QAAS1G,KAAK0G,QACdY,WAAY,CAACC,gBAAgBI,GAAUH,iBAAgB,GACvDyI,aAAc,CACVpV,KAAK,QACLqV,gBAAgB,CAAC5S,EAAKJ,KACtBiT,SAAS,SAAC7S,GACN,EAAK4G,SAAS,CACV5G,WAKZ0S,MAAOhQ,KAAKgQ,QAEhB,wBACI/O,MAAM,2BACNwG,QAASwH,EACTzK,KAAMxE,KAAKmP,QACXzH,SAAU,WACN,EAAKxD,SAAS,CAAC+K,WAAU,IACzB,EAAKlQ,KAAKsH,gBAGd,kBAAC,GAAD,CAASnB,QAAS,SAACnG,GAAQ,EAAKA,KAAOA,MAE3C,wBACIkC,MAAM,2BACNwG,QAASyH,EACT1K,KAAMxE,KAAKqP,WACX3H,SAAU,WACN,EAAKxD,SAAS,CAACgL,oBAAmB,MAGtC,kBAAC,GAAD,CAAkBxB,IAAK1N,KAAKwP,aAAclS,KAAMA,U,GA3LjDuD,aCPbV,GAAO,IAAKA,KACZ6E,GAAS,KAAOA,OAEhBoL,G,6LAOEpQ,KAAKlB,MAAMoG,QAAQlF,KAAKlB,MAAMC,Q,+BAExB,IAAD,EACgBiB,KAAKlB,MAAnBkQ,EADF,EACEA,MAAMtR,EADR,EACQA,KACNqC,EAAqBC,KAAKlB,MAAMC,KAAhCgB,kBAKP,OACI,sBALmB,CACnBoN,SAAU,CAACC,KAAK,GAChBC,WAAY,CAACD,KAAK,KAId,kBAAC,GAAD,CAAMnB,MAAM,4BAEJlM,EAAkB,WAAW,CACzBqF,aAAa1H,EAAK9B,SAClBwE,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,sDAH/BsE,CAKG,uBAAOW,YAAY,iDAItBhD,EAAKR,IAAI,KACL,kBAAC,GAAD,CAAM+O,MAAM,gBAEJlM,EAAkB,WAAW,CACzBqF,aAAa1H,EAAK7B,SAClBuE,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,0CAH/BsE,CAKG,uBAAOlF,KAAK,WAAW6F,YAAY,qCAM1D,kBAAC,GAAD,CAAMuL,MAAM,sBAEJlM,EAAkB,QAAQ,CACtBqF,aAAa1H,EAAK2S,MAClBjQ,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,gDAH/BsE,CAKG,uBAAOlF,KAAK,SAAS6F,YAAY,2CAG5C,kBAAC,GAAD,CAAMuL,MAAM,gBAEJlM,EAAkB,QAAQ,CACtBqF,aAAa1H,EAAK4S,MAClBlQ,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,0CAH/BsE,CAKG,uBAAOW,YAAY,qCAG9B,kBAAC,GAAD,CAAMuL,MAAM,gBAEJlM,EAAkB,UAAU,CACxBqF,aAAa1H,EAAKiS,QAClBvP,MAAM,CACF,CAACC,UAAS,EAAK5E,QAAQ,0CAH/BsE,CAMI,wBAAQW,YAAY,kCAEZsO,EAAMvN,KAAI,SAAAnE,GAAI,OAAI,kBAAC,GAAD,CAAQ4D,IAAK5D,EAAKJ,IAAKyC,MAAOrC,EAAKJ,KAAMI,EAAKP,iB,GAzE7E8D,aAoFR,OAAKE,QAAL,CAAcqP,ICwEdG,G,2MAxJX3M,MAAM,CACF4M,MAAM,GACNxB,MAAM,GACNyB,QAAO,G,EAGXhK,YAAc,WACV,EAAKC,QAAU,CACX,CACIzF,MAAM,qBACN0F,UAAU,YAEd,CACI1F,MAAM,eACN0F,UAAU,SAEd,CACI1F,MAAM,eACN0F,UAAU,SAEd,CACI1F,MAAM,2BACN0F,UAAU,cACVE,OAAO7D,IAEX,CACI/B,MAAM,2BACN0F,UAAU,UACVE,OAAO,SAAC8I,GAAD,OAAW,EAAKe,UAAUf,KAErC,CACI1O,MAAM,eACN4F,OAAO,SAACnJ,GAAD,OACH,8BACI,kBAAC,GAAD,CAAYkH,QAAS,kBAAI,EAAKsB,WAAWxI,KAAzC,gBACA,kBAAC,GAAD,CAAYkH,QAAS,kBAAI,EAAK+L,WAAWjT,KAAzC,qB,EAQpBwI,WAAa,SAACxI,GACV,EAAKA,KAAOA,EACZ,EAAKwG,SAAS,CAACuM,QAAO,K,EAI1BxK,QAAU,WACN,EAAKvI,KAAO,KACZ,EAAKwG,SAAS,CAACuM,QAAO,K,EAI1BG,cAAgB,SAAC5B,GACb,IAAM0B,EAAY1B,EAAMhN,QAAO,SAACC,EAAI3E,GAEhC,OADA2E,EAAI3E,EAAKJ,KAAOI,EAAKP,KACdkF,IACT,IAEF,EAAKyO,UAAYA,G,EAGrBG,gBAAkB,WACd,EAAK9R,KAAKC,gBAAe,SAAOxD,EAAIyD,GAAX,SAAAC,EAAAC,OAAA,mDAEhB3D,EAFgB,uBAGjB,EAAKuD,KAAKsH,cACV,EAAKnC,SAAS,CAACuM,QAAO,IACtB3S,QAAQC,IAAIkB,GACR,EAAKvB,OACLuB,EAAO/B,IAAM,EAAKQ,KAAKR,KAPV,WAAAgC,EAAA,MASIzB,EAAmBwB,IATvB,OAUG,IAVH,OAUNpC,SACPpB,EAAA,EAAQ2M,QAAR,UAAmB,EAAK1K,KAAK,eAAK,eAAlC,6BACA,EAAKoT,YAZQ,yC,EAmB7BH,WAAa,SAACjT,GACV,KAAM6G,QAAQ,CACVtD,MAAM,2BAAD,OAAQvD,EAAK9B,UAClB4I,KAAM,oBAAAtF,EAAAC,OAAA,kEAAAD,EAAA,MACmB1B,EAAcE,EAAKR,MADtC,OAEkB,IAFlB,OAESL,SACPpB,EAAA,EAAQ2M,QAAQ,wCAChB,EAAK0I,YAJP,yC,EAWdA,SAAW,kCAAA5R,EAAAC,OAAA,uDACD4R,EAAK1R,EAAY3B,KAAKR,IADrB,WAAAgC,EAAA,MAEe3B,EAASwT,IAFxB,OAGe,KADhB/J,EAFC,QAGInK,SAAe,EACAmK,EAAOpM,KAAtB4V,EADc,EACdA,MAAMxB,EADQ,EACRA,MACb,EAAK4B,cAAc5B,GACnB,EAAK9K,SAAS,CACVsM,QACAxB,WARD,sC,oFAcPhP,KAAKyG,gB,0CAILzG,KAAK8Q,a,+BAGC,IAAD,SACwB9Q,KAAK4D,MAA3B4M,EADF,EACEA,MAAMxB,EADR,EACQA,MAAMyB,EADd,EACcA,OACb/S,EAAOsC,KAAKtC,MAAQ,GACpBuD,EAAQ,uBAAQpG,KAAK,UAAU+J,QAAS,kBAAI,EAAKqB,YAAzC,4BACd,OACI,wBAAMhF,MAAOA,GACT,wBACAmG,OAAO,MAEPC,WAAYmJ,EACZ9J,QAAS1G,KAAK0G,QACdY,WAAY,CAACC,gBAAgBI,MAE/B,wBACE1G,MAAOvD,EAAKR,IAAI,2BAAO,2BACvBuK,QAASgJ,EACTjM,KAAMxE,KAAK6Q,gBACXnJ,SAAU,WACN,EAAK3I,KAAKsH,cACV,EAAKnC,SAAS,CAACuM,QAAO,MAGxB,kBAAC,GAAD,CACEvL,QAAS,SAAAnG,GAAI,OAAI,EAAKA,KAAOA,GAC7BiQ,MAAOA,EACPtR,KAAMA,U,GAjJPmD,a,qBCHEmQ,G,2MAEnBpN,MAAQ,CACNqN,MAAO,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IAC3BC,OAAQ,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,K,EAG9BC,OAAS,WACP,EAAKjN,UAAS,SAAAN,GAAK,MAAK,CACtBqN,MAAOrN,EAAMqN,MAAMxP,KAAI,SAAA2P,GAAI,OAAIA,EAAO,KACtCF,OAAQtN,EAAMsN,OAAOlP,QAAO,SAACC,EAAK5D,GAEhC,OADA4D,EAAIM,KAAKlE,EAAM,GACR4D,IACN,S,EAOPoP,UAAY,SAACJ,EAAOC,GAClB,MAAO,CACLjQ,MAAO,CACLqQ,KAAM,4BAERC,QAAS,GACTC,OAAQ,CACN5W,KAAK,CAAC,eAAM,iBAEd6W,MAAO,CACL7W,KAAM,CAAC,eAAK,qBAAM,qBAAM,eAAK,qBAAM,iBAErC8W,MAAO,GACPC,OAAQ,CAAC,CACP5U,KAAM,eACNlC,KAAM,MACND,KAAMqW,GACL,CACDlU,KAAM,eACNlC,KAAM,MACND,KAAMsW,M,wEAKF,IAAD,EACiBlR,KAAK4D,MAAtBqN,EADA,EACAA,MAAOC,EADP,EACOA,OACd,OACE,6BACE,wBAAMjQ,MAAO,aAAckG,MAAS,uBAAQtM,KAAK,UAAU+J,QAAS5E,KAAKmR,QAArC,iBAClC,kBAAC,KAAD,CAAc7E,OAAQtM,KAAKqR,UAAUJ,EAAOC,W,GAlDrBrQ,aCAZ+Q,G,2MAEnBhO,MAAQ,CACNqN,MAAO,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IAC3BC,OAAQ,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,K,EAG9BC,OAAS,WACP,EAAKjN,UAAS,SAAAN,GAAK,MAAK,CACtBqN,MAAOrN,EAAMqN,MAAMxP,KAAI,SAAA2P,GAAI,OAAIA,EAAO,KACtCF,OAAQtN,EAAMsN,OAAOlP,QAAO,SAACC,EAAK5D,GAEhC,OADA4D,EAAIM,KAAKlE,EAAM,GACR4D,IACN,S,EAOPoP,UAAY,SAACJ,EAAOC,GAClB,MAAO,CACLjQ,MAAO,CACLqQ,KAAM,gBAERC,QAAS,GACTC,OAAQ,CACN5W,KAAK,CAAC,eAAM,iBAEd6W,MAAO,CACL7W,KAAM,CAAC,eAAK,qBAAM,qBAAM,eAAK,qBAAM,iBAErC8W,MAAO,GACPC,OAAQ,CAAC,CACP5U,KAAM,eACNlC,KAAM,OACND,KAAMqW,GACL,CACDlU,KAAM,eACNlC,KAAM,OACND,KAAMsW,M,wEAKF,IAAD,EACiBlR,KAAK4D,MAAtBqN,EADA,EACAA,MAAOC,EADP,EACOA,OACd,OACE,6BACE,4BACE,uBAAQrW,KAAK,UAAU+J,QAAS5E,KAAKmR,QAArC,iBAGF,wBAAMlQ,MAAM,4BACV,kBAAC,KAAD,CAAcqL,OAAQtM,KAAKqR,UAAUJ,EAAOC,W,GAtDpBrQ,aCAbgR,G,2MAEnBR,UAAY,WACV,MAAO,CACLpQ,MAAQ,CACNqQ,KAAM,yDACNQ,QAAS,2BACTC,EAAE,UAEJR,QAAU,CACRS,QAAS,OACTC,UAAW,6BAEbT,OAAQ,CACNU,OAAQ,WACRC,KAAM,OACNvX,KAAM,CAAC,2BAAO,2BAAO,2BAAO,2BAAO,6BAErC+W,OAAS,CACP,CACE5U,KAAM,2BACNlC,KAAM,MACNuX,OAAS,MACTC,OAAQ,CAAC,MAAO,OAChBzX,KAAK,CACH,CAAC+E,MAAM,IAAK5C,KAAK,4BACjB,CAAC4C,MAAM,IAAK5C,KAAK,4BACjB,CAAC4C,MAAM,IAAK5C,KAAK,4BACjB,CAAC4C,MAAM,IAAK5C,KAAK,4BACjB,CAAC4C,MAAM,KAAM5C,KAAK,6BAEpBuV,UAAW,CACTC,SAAU,CACRC,WAAY,GACZC,cAAe,EACfC,YAAa,2B,EASzBC,WAAa,WACX,MAAO,CACLC,gBAAiB,UAEjB3R,MAAO,CACLqQ,KAAM,2BACNa,KAAM,SACNU,IAAK,GACLC,UAAW,CACTC,MAAO,SAIXxB,QAAU,CACRS,QAAS,OACTC,UAAW,6BAGbe,UAAW,CACTC,MAAM,EACN1S,IAAK,GACLC,IAAK,IACL0S,QAAS,CACPC,eAAgB,CAAC,EAAG,KAGxBxB,OAAS,CACP,CACE5U,KAAK,2BACLlC,KAAK,MACLuX,OAAS,MACTC,OAAQ,CAAC,MAAO,OAChBzX,KAAK,CACH,CAAC+E,MAAM,IAAK5C,KAAK,4BACjB,CAAC4C,MAAM,IAAK5C,KAAK,4BACjB,CAAC4C,MAAM,IAAK5C,KAAK,4BACjB,CAAC4C,MAAM,IAAK5C,KAAK,4BACjB,CAAC4C,MAAM,IAAK5C,KAAK,6BACjBqW,MAAK,SAAUlU,EAAGmU,GAAK,OAAOnU,EAAES,MAAQ0T,EAAE1T,SAC5C2T,SAAU,SACVrH,MAAO,CACLsH,OAAQ,CACNT,UAAW,CACTC,MAAO,8BAIbS,UAAW,CACTD,OAAQ,CACNE,UAAW,CACTV,MAAO,4BAETW,OAAQ,GACR7T,OAAQ,GACR8T,QAAS,KAGbrB,UAAW,CACTiB,OAAQ,CACNR,MAAO,UACPP,WAAY,IACZE,YAAa,uBAIjBkB,cAAe,QACfC,gBAAiB,aACjBC,eAAgB,SAAUC,GACxB,OAAuB,IAAhBC,KAAKC,c,wEAQpB,OACE,6BACE,wBAAMhT,MAAM,kCACV,kBAAC,KAAD,CAAcqL,OAAQtM,KAAKqR,YAAapK,MAAO,CAACyE,OAAQ,QAE1D,wBAAMzK,MAAM,kCACV,kBAAC,KAAD,CAAcqL,OAAQtM,KAAK2S,aAAc1L,MAAO,CAACyE,OAAQ,a,GA9HlC7K,a,qCC0BlBqT,I,mNAvBbC,OAAS,WACP,EAAKrV,MAAMQ,QAAQC,QAAQ,gB,wEAI3B,OAEE,wBAAKU,UAAU,aACb,wBAAKmN,KAAM,GAAInN,UAAU,SACzB,wBAAKmN,KAAM,GAAInN,UAAU,SACvB,mCACA,wGACA,6BACE,uBAAQpF,KAAK,UAAU+J,QAAS5E,KAAKmU,QAArC,mC,GAfWtT,cCQhBuT,G,IAAAA,OAAOC,G,IAAAA,MAAMC,G,IAAAA,QAqCLC,G,iLAjCP,IAAM7W,EAAO2B,EAAY3B,KAEzB,OADAI,QAAQC,IAAIL,GACRA,GAASA,EAAKR,IAId,uBAAQ+J,MAAO,CAACuN,UAAU,SACtB,kBAACH,GAAD,KACI,kBAAC,GAAD,OAEJ,2BACI,kBAAC,GAAD,eACA,kBAACC,GAAD,CAASrN,MAAO,CAACqB,OAAO,GAAGsK,gBAAgB,SACvC,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAUzE,OAAO,EAAMsG,KAAK,IAAI9S,GAAG,gBACnC,kBAAC,IAAD,CAAOE,KAAK,cAAcqM,UAAWnJ,KACrC,kBAAC,IAAD,CAAOlD,KAAK,kBAAkBqM,UAAWtI,KACzC,kBAAC,IAAD,CAAO/D,KAAK,iBAAiBqM,UAAWD,KACxC,kBAAC,IAAD,CAAOpM,KAAK,cAAcqM,UAAWa,KACrC,kBAAC,IAAD,CAAOlN,KAAK,cAAcqM,UAAWqC,KACrC,kBAAC,IAAD,CAAO1O,KAAK,oBAAoBqM,UAAW8C,KAC3C,kBAAC,IAAD,CAAOnP,KAAK,qBAAqBqM,UAAW0D,KAC5C,kBAAC,IAAD,CAAO/P,KAAK,oBAAoBqM,UAAW2D,KAC3C,kBAAC,IAAD,CAAO3D,UAAWgG,OAG1B,kBAACE,GAAD,CAAQnN,MAAO,CAACyN,UAAU,SAAS3B,MAAM,SAAzC,qIAvBD,kBAAC,IAAD,CAAUpR,GAAG,e,GALZd,aCDL8T,G,iLAVX,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO9S,KAAK,SAASqM,UAAWxP,IAChC,kBAAC,IAAD,CAAOmD,KAAK,SAASqM,UAAWqG,W,GANxB1T,aCAZnD,GAAO0B,EAAab,UAC1Bc,EAAY3B,KAAKA,GACjBkX,IAAS/N,OAAO,kBAAC,GAAD,MAASgO,SAASC,eAAe,U","file":"static/js/main.de0faba7.chunk.js","sourcesContent":["/* \r\n能发送异步ajax请求的函数模块\r\n*/\r\nimport axios from 'axios'\r\nimport {message} from 'antd'\r\nexport default function ajax(url='',data={},type='GET'){\r\n    return new Promise((resolve,reject)=>{\r\n        var promise;\r\n        if(type === 'GET'){\r\n            promise = axios.get(url,{\r\n                params:data\r\n            });\r\n        }else{\r\n            promise = axios.post(url,data);\r\n        }\r\n        promise.then(val=>{\r\n            resolve(val.data);\r\n        }).catch(err=>{\r\n            // reject(err);\r\n            message.error('请求出错了:'+err.message);\r\n        })\r\n    });\r\n    \r\n}\r\n","import jsonp from 'jsonp'\r\nimport {message} from 'antd'\r\nimport ajax from './ajax'\r\n\r\nconst BASE = '';\r\n// 登录\r\nexport const reqLogin = (username,password)=> ajax(BASE+'/login',{username,password},'POST');\r\n\r\n// 获取一级/二级分类的列表 \r\nexport const reqCategorys = (parentId) =>ajax(BASE + '/manage/category/list',{parentId});\r\n\r\nexport const reqCategoryInfo = (categoryId)=>ajax(BASE+'/manage/category/info',{categoryId});\r\n\r\n// 添加分类\r\nexport const reqAddCategorys = (parentId,categoryName) =>ajax(BASE + '/manage/category/add',{categoryName,parentId},\"POST\");\r\n\r\n// 更新分类\r\nexport const reqUpdateCategory = (categoryId,categoryName) =>ajax(BASE + '/manage/category/update',{categoryId,categoryName},\"POST\");\r\n\r\n// 获取商品分页列表\r\nexport const reqProducts = (pageNum,pageSize)=>ajax(BASE+'/manage/product/list',{pageNum,pageSize});\r\n\r\n// 搜索商品分页列表(根据商品名称/商品描述)\r\n// searchType:搜索的类型,productName/productDesc\r\nexport const reqSearchProducts = ({pageNum,pageSize,searchName,searchType})=>ajax(BASE+'/manage/product/search',{\r\n    pageNum,\r\n    pageSize,\r\n    [searchType]:searchName\r\n});\r\n\r\n// 更新商品状态(上架/下架)\r\nexport const reqUpdateStatus = (productId,status) => ajax(BASE+'/manage/product/updateStatus',{productId,status},'POST');\r\n\r\n// 删除图片\r\nexport const reqDeleteImg = (name) => ajax(BASE+'/manage/img/delete',{name},'POST');\r\n\r\n// 添加/删除商品\r\nexport const reqAddOrUpdateProduct = (product)=> ajax(BASE+'/manage/product/'+(product._id?'update':'add'),product,'POST');\r\n\r\n// 获取所有角色的列表\r\nexport const reqRoles = ()=>ajax(BASE+'/manage/role/list');\r\n\r\n// 添加角色\r\nexport const reqAddRole = (name)=>ajax(BASE+'/manage/role/add',{name},'POST');\r\n\r\n// 更新角色\r\nexport const reqUpdateRole = (role)=>ajax(BASE+'/manage/role/update',role,'POST');\r\n\r\n// 获取所有用户的列表\r\nexport const reqUsers = (_id)=>ajax(BASE+'/manage/user/list',{_id});\r\n\r\n// 删除用户\r\nexport const reqDeleteUser = (_id)=>ajax(BASE+'/manage/user/delete',{_id},\"POST\");\r\n\r\n// 添加/更新用户\r\nexport const reqAddOrUpdateUser = (user)=> ajax(BASE+'/manage/user/'+(user._id?'update':'add'),user,'POST');\r\n\r\n// 更新用户\r\n// export const reqUpdateUser = (user)=> ajax(BASE+'/manage/user/update',user,'POST');\r\n/* \r\njson请求的接口请求函数\r\n*/\r\nexport const reqWeather = (city) =>{\r\n    return new Promise((resolve,reject) =>{\r\n        const url = `https://api.map.baidu.com/telematics/v3/weather?location=${city}&output=json&ak=3p49MVra6urFRGOT9s8UBWr2`;\r\n        jsonp(url,{},(err,data)=>{\r\n            console.log('jsonp',err,data);\r\n            if(!err && data.status === 'success'){\r\n                const {dayPictureUrl,weather} = data.results[0].weather_data[0]\r\n                resolve({dayPictureUrl,weather});\r\n            }else{\r\n                message.error('获取天气信息失败!');\r\n            }\r\n        });\r\n    })\r\n    \r\n}\r\n\r\n","import store from 'store'\r\nconst USER_KEY = 'user_key'\r\nexport default{\r\n    // 存入localStorage\r\n    saveUser(user){\r\n        // localStorage.setItem(USER_KEY,JSON.stringify(user));\r\n        store.set(USER_KEY,user);\r\n    },\r\n    // 读取localStorage\r\n    getUser(){\r\n        // return JSON.parse(localStorage.getItem(USER_KEY) || '{}');\r\n        return store.get(USER_KEY || {});\r\n    },\r\n    // 删除localStorage\r\n    delUser(){\r\n        store.remove(USER_KEY);\r\n    }\r\n}","export default{\r\n    user:{},        //保存当前登录的user\r\n}","import React, { Component } from 'react';\r\nimport { Form, Icon, Input, Button ,message} from 'antd';\r\nimport {reqLogin} from '../../api/index'\r\nimport storageUtils from '../../utils/storageUtils.js'\r\nimport md5 from 'md5'\r\nimport './login.less'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\n/* 登录的路由组件 */\r\nclass Login extends Component {\r\n    handleSubmit = (e)=>{\r\n        e.preventDefault();\r\n        this.props.form.validateFields(async (err, values) => {\r\n            if (!err) {\r\n            //   console.log('提交ajax请求', values);\r\n                const {username,password} = values;\r\n                const data = await reqLogin(username,password);\r\n                // console.log(data);\r\n                if(data.status === 0){\r\n                    storageUtils.saveUser(data.data);\r\n                    memoryUtils.user=data.data;\r\n                    console.log(memoryUtils.user);\r\n                    this.props.history.replace('/admin/home');  \r\n                }else{\r\n                    message.error(data.msg);\r\n                }               \r\n            }else{\r\n                console.log(\"校验失败!!\");\r\n            }\r\n          });\r\n        // const form = this.props.form;\r\n        // const value = form.getFieldsValue();\r\n        // console.log(value);\r\n    }\r\n    // 对密码进行自定义验证\r\n    validatorPwd = (rule,value,callback)=>{\r\n        if(!value){\r\n            callback('密码必须输入');\r\n        }else if(value.length < 3){\r\n            callback('密码长度不能小于3位');\r\n        }else if(value.length > 12){\r\n            callback('密码长度不能大于12位');\r\n        }else if(!/^[a-zA-Z0-9]+$/.test(value)){\r\n            callback('密码必须是英文、数字或下划线组成');\r\n        }else{\r\n            callback();\r\n        }\r\n    }\r\n    render() {\r\n        // 得到具有强大功能的form对象\r\n        const form = this.props.form;\r\n        const {getFieldDecorator} = form;\r\n\r\n        return (\r\n            <div className=\"login\">\r\n                <header className=\"login-header\">\r\n                    <h1>React项目：后台管理系统</h1>\r\n                </header>\r\n                <section className=\"login-content\">\r\n                    <h2>用户登录</h2>\r\n                    <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                        <Form.Item>\r\n                            {getFieldDecorator('username', {\r\n                                //声明式验证:直接使用别人定义好的规则进行验证\r\n                                rules: [\r\n                                    { required: true,whitespace:true, message: '用户名必须输入'},\r\n                                    { min: 2, message: '用户名至少2位'},\r\n                                    { max: 12, message: '用户名最多12位'},\r\n                                    // { pattern: /^[a-zA-Z0-9]+$/, message: '用户名必须是英文、数字或下划线组成'},\r\n                                ],\r\n                            })(\r\n                                <Input\r\n                                prefix={<Icon type=\"user\" />}\r\n                                placeholder=\"用户名\"\r\n                                />\r\n                            )}\r\n                            \r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            {\r\n                                getFieldDecorator(\"password\",{\r\n                                    rules:[\r\n                                        {\r\n                                            validator:this.validatorPwd\r\n                                        }\r\n                                    ]\r\n                                })(\r\n                                    <Input\r\n                                    prefix={<Icon type=\"lock\"/>}\r\n                                    type=\"password\"\r\n                                    placeholder=\"密码\"\r\n                                    />\r\n                                )\r\n                            }                            \r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                                Log in\r\n                            </Button>                       \r\n                        </Form.Item>\r\n                    </Form>\r\n                </section>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n/* \r\n1.高阶函数\r\n    1).一类特别的函数\r\n        a.接受函数类型的参数\r\n        b.返回值是函数\r\n    2)常见的高阶函数\r\n        a.定时器:setTimeout()/setInterval()\r\n        b.Promise: Promise(()=>{}).then(value=>{})\r\n        c.数组遍历相关的方法:forEach()/filter()/map()\r\n        d.函数对象的bind()\r\n    3)高阶函数更加动态,更加具有扩展性\r\n\r\n2.高阶组件\r\n    1)本质就是一个函数\r\n    2)接受一个组件(被包装组件),返回一个新的组件(包装组件),包装组件会向被包装组件传入特定属性\r\n    3)作用:扩展组件的功能\r\n    4)高阶组件也是高阶函数:接收一个组件函数,返回是一个新的组件函数\r\n\r\n*/\r\n/* \r\n包装Form组件生成一个新的组件 Form(Login)\r\n新组建会向Form组件传递一个强大的对象属性:form\r\n*/\r\nconst WrapLogin = Form.create()(Login);\r\nexport default WrapLogin;\r\n/* \r\n1.前台表单验证\r\n2.收集表单输入数据\r\n*/\r\n","const menuList = [\r\n    {\r\n        title:'首页',    //菜单标题名称\r\n        key:'/admin/home',   //对应的path\r\n        icon:'home',     //图标名称\r\n        isPublic:true,    //是否公开的\r\n    },\r\n    {\r\n        title:'商品',\r\n        key:'/admin/products',\r\n        icon:'appstore',\r\n        children:[\r\n            {\r\n                title:'品类管理',\r\n                key:'/admin/category',\r\n                icon:'bars'\r\n            },\r\n            {\r\n                title:'商品管理',\r\n                key:'/admin/product',\r\n                icon:'tool'\r\n            },\r\n        ]\r\n    },\r\n    {\r\n        title:'用户管理',\r\n        key:'/admin/user',\r\n        icon:'user',\r\n    },\r\n    {\r\n        title:'角色管理',\r\n        key:'/admin/role',\r\n        icon:'safety',\r\n    },\r\n    {\r\n        title:'图形图表',\r\n        key:'/admin/charts',\r\n        icon:'area-chart',\r\n        children:[\r\n            {\r\n                title:'柱形图',\r\n                key:'/admin/charts/bar',\r\n                icon:'bar-chart'\r\n            },\r\n            {\r\n                title:'折线图',\r\n                key:'/admin/charts/line',\r\n                icon:'line-chart'\r\n            },\r\n            {\r\n                title:'饼图',\r\n                key:'/admin/charts/pie',\r\n                icon:'pie-chart'\r\n            },\r\n        ]\r\n    }\r\n];\r\nexport default menuList;","import React, { Component } from 'react'\r\nimport {Link,withRouter} from 'react-router-dom'\r\nimport {Menu,Icon} from 'antd'\r\nimport menuList from '../../config/menuConfig'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport './left-nav.less'\r\n\r\nconst SubMenu = Menu.SubMenu;\r\n/* \r\n左侧导航的组件\r\n*/\r\nclass LeftNav extends Component {\r\n\r\n    /* \r\n    根据menu的数据数组生成对应的标签数组\r\n    使用map() + 递归调用\r\n    */\r\n    getMenuNOdes_map = (menuList)=>{\r\n        return menuList.map(item =>{\r\n            if(!item.children){\r\n                return(\r\n                    <Menu.Item key={item.key}>\r\n                        <Link to={item.key}>\r\n                            <Icon type={item.icon}/>\r\n                            <span>首页</span>\r\n                        </Link>                        \r\n                    </Menu.Item>\r\n                );\r\n            }else {\r\n               return(\r\n                    <SubMenu\r\n                        key={item.key}\r\n                        title={\r\n                        <span>\r\n                            <Icon type={item.icon} />\r\n                        <span>{item.title}</span>\r\n                        </span>\r\n                        }>\r\n                            {this.getMenuNOdes_map(item.children)}\r\n                    </SubMenu>\r\n               );\r\n            }\r\n        });\r\n    }\r\n    /* \r\n    根据menu的数据数组生成对应的标签数组\r\n    使用reduce() + 递归调用\r\n    */\r\n    getMenuNOdes = (menuList) =>{\r\n        const path = this.props.location.pathname;\r\n        return menuList.reduce((pre,item) => {\r\n\r\n            // 如果当前用户有item对应的权限,才需要显示对应的菜单项\r\n            if (this.hasAuth(item)) {\r\n               // 向pre添加<Menu.Item>\r\n                if(!item.children){\r\n                    pre.push((\r\n                        <Menu.Item key={item.key}>\r\n                            <Link to={item.key}>\r\n                                <Icon type={item.icon}/>\r\n                                <span>{item.title}</span>\r\n                            </Link>                        \r\n                        </Menu.Item>\r\n                    ));\r\n                }else{\r\n                    const cItem = item.children.find(cItem =>path.indexOf(cItem.key) ===0);\r\n                    if(cItem){\r\n                        this.openKey = item.key;\r\n                    }                \r\n                    pre.push((\r\n                        <SubMenu\r\n                            key={item.key}\r\n                            title={\r\n                            <span>\r\n                                <Icon type={item.icon} />\r\n                            <span>{item.title}</span>\r\n                            </span>\r\n                            }>\r\n                                {this.getMenuNOdes(item.children)}\r\n                        </SubMenu>\r\n                    ));\r\n                } \r\n            }\r\n\r\n            \r\n            return pre;\r\n        },[]);\r\n    }\r\n\r\n    /* 判断当前登录用户对item是否有权限 */\r\n    hasAuth = (item)=>{\r\n        const {key,isPublic} = item;\r\n        const menus = memoryUtils.user.role.menus;\r\n        const username = memoryUtils.user.username;\r\n\r\n        /* \r\n        需要判断的情况:\r\n        1.如果当前用户是admin\r\n        2.如果当前item是公开的\r\n        3.当前用户有此item的权限:key有没有在menus中\r\n        */\r\n        if (username==='admin' || isPublic || menus.indexOf(key)!==-1) {\r\n            return true;\r\n        }else if(item.children){  //4.如果当前用户有此item的某个子item的权限\r\n            return !!item.children.find(child => menus.indexOf(child.key) !== -1)\r\n        }\r\n       return false;\r\n    }\r\n\r\n    /* \r\n    在第一次render()之前执行一次\r\n    为第一次render()准备数据(同步的)\r\n    */\r\n    componentWillMount(){\r\n        this.menuNodes = this.getMenuNOdes(menuList);\r\n    }\r\n    render() {\r\n        let path = this.props.location.pathname;\r\n        const openKey = this.openKey;\r\n        if(path.indexOf('/admin/product') === 0){\r\n            path = '/admin/product';\r\n        }\r\n        return (\r\n            <div className=\"left-nav\">\r\n                <Link to='#' className=\"left-nav-header\">\r\n                    <h1>硅谷后台</h1>\r\n                </Link>\r\n                <Menu\r\n                mode=\"inline\"\r\n                theme=\"dark\"\r\n                selectedKeys={[path]}\r\n                defaultOpenKeys={[openKey]}\r\n                >\r\n                {this.menuNodes}\r\n                \r\n                </Menu>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n/* \r\nwithRotuer高阶组件:\r\n包装非路由㢟,返回一个新的组件\r\n新的组件向非路由组件传递3个属性:history/location/match\r\n*/\r\nexport default withRouter(LeftNav);","export function formateDate(time){\r\n    if(!time) return '';\r\n    let date = new Date(time);\r\n        return date.getFullYear() + '-' + date.getMonth() +'-'+date.getDate()\r\n        +' '+date.getHours()+':'+date.getMinutes()+':'+date.getSeconds()\r\n}","import React, { Component } from 'react';\r\nimport './linkButton.less'\r\n\r\nclass LinkButton extends Component {\r\n    render() {\r\n        return <button {...this.props} className=\"link-button\"></button>;\r\n    }\r\n}\r\n\r\nexport default LinkButton;","import React, { Component } from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\nimport {Modal} from 'antd'\r\n// import api from '../../api/index'\r\nimport {reqWeather} from '../../api/index'\r\nimport menuList from '../../config/menuConfig'\r\nimport {formateDate} from '../../utils/dateUtils'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport LinkButton from '../link-button/linkButton'\r\nimport './header.less'\r\nclass Header extends Component {\r\n    state = {\r\n        currentTime:formateDate(Date.now()),\r\n        dayPictureUrl:'',         //天气图片url\r\n        weather:'',       //天气文本\r\n    }\r\n    getTime = () => {\r\n        this.intervalId = setInterval(() => {\r\n            const currentTime = formateDate(Date.now());\r\n            this.setState({currentTime});\r\n        }, 1000);\r\n    }\r\n    getWeather = async () => {\r\n        const {dayPictureUrl,weather} = await reqWeather('温州');\r\n        this.setState({dayPictureUrl,weather});\r\n    }\r\n    getTitle = () => {\r\n        // 得到当前请求路径\r\n        const path = this.props.location.pathname;\r\n        let title;\r\n        menuList.forEach(item => {\r\n            if(item.key === path){\r\n                title = item.title;\r\n            }else if(item.children){\r\n                const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0)\r\n                if(cItem){\r\n                    title = cItem.title;\r\n                }\r\n            }\r\n        });\r\n        return title;\r\n    }\r\n    logOut = () => {\r\n        Modal.confirm({\r\n            title: '确定退出?',\r\n            onOk:() => {\r\n            //   console.log('OK');\r\n              memoryUtils.user = {};\r\n              localStorage.clear();\r\n              this.props.history.replace('/login');\r\n            },\r\n          });\r\n    }\r\n    /* \r\n    在第一次render之后执行\r\n    一般在此执行异步操作: 发ajax请求/启动定时器\r\n    */\r\n    componentDidMount(){\r\n        this.getTime();\r\n        this.getWeather();\r\n    }\r\n    /* \r\n    当前组件卸载之前调用\r\n    */\r\n    componentWillUnmount(){\r\n        clearInterval(this.intervalId);\r\n    }\r\n    render() {\r\n        const {currentTime,dayPictureUrl,weather} = this.state;\r\n        const username = memoryUtils.user.username;\r\n        const title = this.getTitle();\r\n        return (\r\n            <div className='header'>\r\n                <div className='header-top'>\r\n                    <span>欢迎,{username}</span>\r\n                    <LinkButton onClick={this.logOut}>退出</LinkButton>\r\n                </div>\r\n                <div className='header-bottom'>\r\n                    <div className='header-bottom-left'>{title}</div>\r\n                    <div className='header-bottom-right'>\r\n                        <span>{currentTime}</span>\r\n                        <img src={dayPictureUrl} alt=\"晴\"/>\r\n                        <span>{weather}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(Header);","import React, { Component } from 'react';\r\nimport './home.less'\r\n/* \r\n首页的路由\r\n*/\r\nclass Home extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"home\">\r\n                欢迎使用硅谷后台管理系统\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {Form,Select,Input} from 'antd'\r\n\r\nconst Item = Form.Item;\r\nconst Option = Select.Option;\r\n/* 添加分类的form组件 */\r\nclass AddForm extends Component {\r\n    static propTypes = {\r\n        setForm:PropTypes.func.isRequired,\r\n        categorys:PropTypes.array.isRequired,  //一级分类的数组\r\n        parentId:PropTypes.string.isRequired,  //父分类的ID\r\n    }\r\n    componentWillMount(){\r\n        this.props.setForm(this.props.form)\r\n    }\r\n    render() {\r\n        const {categorys,parentId} = this.props;\r\n        const {getFieldDecorator} = this.props.form;\r\n        return (\r\n            <Form>\r\n                <Item>\r\n                    {\r\n                        getFieldDecorator('parentId',{\r\n                            initialValue:parentId\r\n                        })(\r\n                            <Select>\r\n                                <Option value='0'>一级分类</Option>\r\n                                {categorys.map(c =><Option value={c._id}>{c.name}</Option>)}\r\n                            </Select>\r\n                        )\r\n                    }\r\n                    \r\n                </Item>\r\n                <Item>\r\n                    {\r\n                        getFieldDecorator('categoryName',{\r\n                            initialValue:'',\r\n                            rules:[\r\n                                {required:true,message:'分类名称必须输入'}\r\n                            ]\r\n                        })(<Input placeholder='请输入分类名称'></Input>)\r\n                    }                    \r\n                </Item>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Form.create()(AddForm);","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {Form,Input} from 'antd'\r\n\r\nconst Item = Form.Item;\r\n/* 更新分类的form组件 */\r\nclass UpdateForm extends Component {\r\n    static propType = {\r\n        categoryName:PropTypes.string.isRequired,\r\n        setForm:PropTypes.func.isRequired\r\n    }\r\n    componentWillMount(){\r\n        // 将form对象通过setForm()传递给父组件\r\n        console.log(this.props.form);\r\n        this.props.setForm(this.props.form)\r\n    }\r\n    render() {\r\n        const {categoryName} = this.props;\r\n        const {getFieldDecorator} = this.props.form;\r\n        return (\r\n            <Form>\r\n                <Item>\r\n                    {\r\n                        getFieldDecorator('categoryName',{\r\n                            initialValue:categoryName,\r\n                            rules:[\r\n                                {required:true,message:'分类名称必须输入'}\r\n                            ]\r\n                        })(<Input placeholder='请输入分类名称'></Input>)\r\n                    }                    \r\n                </Item>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Form.create()(UpdateForm);","import React, { Component } from 'react';\r\nimport { Card,Table,Button,Icon,Modal,message } from 'antd';\r\nimport LinkButton from '../../components/link-button/linkButton'\r\nimport AddForm from './add-form'\r\nimport UpdateForm from './update-form'\r\nimport {reqCategorys,reqUpdateCategory,reqAddCategorys} from '../../api/index'\r\n\r\n/* \r\n分类的路由\r\n*/\r\nclass Category extends Component {\r\n    state = {\r\n      loading:false,   //是否正在获取数据\r\n      categorys:[],   //一级分类列表\r\n      subCategorys:[],   //二级分类列表\r\n      parentId:'0',   //当前需要显示的分类列表的父分类ID\r\n      parentName:'',  //当前需要显示的分类列表的父分类名称\r\n      showStatus:0, //标识添加/更新的确认框是否显示,0:都不显示,1:显示添加,2:显示更新\r\n    }\r\n\r\n    /* 显示添加的确认框 */\r\n    showAdd=()=>{\r\n      this.setState({\r\n        showStatus:1\r\n      });\r\n    }\r\n\r\n    /* 显示更新的确认框 */\r\n    showUpdate = (category) => {\r\n      this.category = category;\r\n      this.setState({\r\n        showStatus:2\r\n      });\r\n    }\r\n\r\n    /* 响应点击取消:隐藏确定框 */\r\n    handleCancel = ()=>{\r\n      // 清除输入数据\r\n      this.form.resetFields();\r\n      this.setState({\r\n        showStatus:0\r\n      });\r\n    }\r\n\r\n    /* 更新分类 */\r\n    updateCategory = ()=>{\r\n\r\n      // 进行表单验证,只有通过了才处理\r\n      this.form.validateFields(async (err,values)=>{\r\n        if(!err){\r\n          /* 隐藏确认框 */\r\n          this.setState({\r\n            showStatus:0\r\n          });\r\n          const categoryId = this.category._id;\r\n          const {categoryName} = values;\r\n          // 清除输入数据\r\n          this.form.resetFields();\r\n          const result = await reqUpdateCategory(categoryId,categoryName);\r\n          if(result.status ===0){\r\n            this.getCategorys();\r\n          }\r\n        }\r\n      });\r\n      \r\n    }\r\n\r\n    /* 添加分类 */\r\n    addCategory = async ()=> {\r\n      this.form.validateFields(async (err,values)=>{\r\n        if(!err){\r\n          /* 隐藏确认框 */\r\n          this.setState({\r\n            showStatus:0\r\n          });\r\n          const {parentId,categoryName} = values;\r\n          // 清除输入数据\r\n          this.form.resetFields();\r\n          const result = await reqAddCategorys(parentId,categoryName);\r\n          if(result.status == 0){\r\n            if(parentId === this.state.parentId){\r\n              this.getCategorys();\r\n            }else{\r\n              this.getCategorys('0');\r\n            }        \r\n          }\r\n        }\r\n      });\r\n      \r\n    }\r\n\r\n    //初始化Table所有列的数组\r\n    initColumns = ()=>{\r\n      this.columns = [\r\n        {\r\n          title: '分类的名称',\r\n          dataIndex: 'name',\r\n        },\r\n        {\r\n          title: '操作',\r\n          width:300,\r\n          render:(category)=>(\r\n            <span>\r\n                <LinkButton onClick={() =>this.showUpdate(category)}>修改分类</LinkButton>\r\n                {/* 如何定义事件回调函数传递参数:先定义一个匿名函数,在函数调用处理的函数并传递参数 */}\r\n                {this.state.parentId ==='0'?<LinkButton onClick={() =>this.showSubCategorys(category)}>查看子分类</LinkButton>:null}\r\n                \r\n            </span>\r\n          )\r\n        }\r\n      ];\r\n    }\r\n\r\n    /* 显示指定一级分类对象的二级子列表 */\r\n    showSubCategorys = (category)=>{\r\n      this.setState({\r\n        parentId:category._id,\r\n        parentName:category.name\r\n      },()=>{\r\n        this.getCategorys();\r\n      });\r\n    }\r\n\r\n    /* 显示指定一级分类列表 */\r\n    showCategorys = ()=>{\r\n      this.setState({\r\n        parentId:'0',\r\n        parentName:'',\r\n        subCategorys:[]\r\n\r\n      });\r\n    }\r\n\r\n    /* \r\n    异步获取一级/二级分类列表显示 \r\n    parentId:如果没有指定则根据状态中的parentId请求,如果指定了根据指定的请求\r\n    */\r\n    getCategorys = async (parentId)=>{\r\n      //在发请求前,显示loading\r\n      this.setState({loading:true});\r\n      parentId = parentId || this.state.parentId;\r\n      //发异步ajax请求,获取分类列表\r\n      const result = await reqCategorys(parentId);\r\n      //在请求完成后,隐藏loading\r\n      this.setState({loading:false});\r\n\r\n      if(result.status === 0){\r\n        const categorys = result.data;\r\n        if(parentId === '0'){\r\n          this.setState({\r\n            categorys\r\n          });\r\n        }else{\r\n          //更新状态\r\n          this.setState({\r\n            subCategorys:categorys\r\n          });\r\n        }\r\n        \r\n      }else{\r\n        message.error('获取分类列表失败');\r\n      }\r\n    }\r\n\r\n    /* 为第一次render()准备数据 */\r\n    componentWillMount(){\r\n      this.initColumns();\r\n    }\r\n    /* 执行异步任务:发送异步ajax请求 */\r\n    componentDidMount(){\r\n      this.getCategorys();\r\n    }\r\n\r\n    render() {\r\n      let {categorys,loading,subCategorys,parentId,parentName,showStatus} = this.state;\r\n      const category = this.category || {};\r\n      const title = parentId ==='0'?'一级分类列表':(\r\n        <span>\r\n          <LinkButton onClick={this.showCategorys}>一级分类列表</LinkButton>\r\n          <Icon type=\"arrow-right\" style={{marginRight:5}}></Icon>\r\n          <span>{parentName}</span>\r\n        </span>\r\n      );\r\n      const extra = (\r\n          <Button type='primary' onClick={this.showAdd}>\r\n              <Icon type='plus'/>\r\n              添加\r\n          </Button>\r\n      );\r\n      return (\r\n          <Card title={title} extra={extra}>\r\n              <Table\r\n                rowKey='_id'\r\n                loading={loading}                     \r\n                dataSource={parentId==='0'?categorys:subCategorys} \r\n                columns={this.columns}\r\n                pagination={{defaultPageSize:5,showQuickJumper:true}}\r\n              />\r\n              <Modal\r\n                title=\"添加分类\"\r\n                visible={showStatus === 1}\r\n                onOk={this.addCategory}\r\n                onCancel={this.handleCancel}\r\n              >\r\n                <AddForm categorys={categorys} parentId={parentId} setForm = {(form)=>{this.form = form}}></AddForm>\r\n              </Modal>\r\n\r\n              <Modal\r\n                title=\"更新分类\"\r\n                visible={showStatus === 2}\r\n                onOk={this.updateCategory}\r\n                onCancel={this.handleCancel}\r\n              >\r\n                <UpdateForm categoryName={category.name} setForm = {(form)=>{this.form = form}}></UpdateForm>\r\n              </Modal>\r\n          </Card>\r\n          \r\n      );\r\n    }\r\n}\r\n\r\nexport default Category;","/* \r\n包含一些常量值的模块\r\n*/\r\nexport const PAGE_SIZE = 3;   //每页显示的记录数\r\nexport const BASE_IMG_URL = 'http://localhost:3001/upload/'","import React, { Component } from 'react'\r\nimport {Card,Select,Input,Button,Icon,Table, message} from 'antd'\r\nimport LinkButton from '../../components/link-button/linkButton'\r\nimport {reqProducts,reqSearchProducts,reqUpdateStatus} from '../../api/index'\r\nimport {PAGE_SIZE} from '../../utils/constants'\r\nconst Option = Select.Option;\r\n/* product的默认子路由组件 */\r\nclass ProductHome extends Component {\r\n    state = {\r\n        total:0,       //商品的总数量\r\n        products:[],   //商品的数组\r\n        loading:false,  //是否正在加载中\r\n        searchName:'',  //搜索的关键字\r\n        searchType:'productName'    //根据哪个字段搜索\r\n    }\r\n    //初始化table的列的数组\r\n    initColumns = ()=>{\r\n        this.columns = [\r\n            {\r\n              title: '商品名称',\r\n              dataIndex: 'name',\r\n            },\r\n            {\r\n                title: '商品描述',\r\n                dataIndex: 'desc',\r\n            },\r\n            {\r\n                title: '价格',\r\n                dataIndex: 'price',\r\n                render:(price)=>'￥'+price\r\n            },\r\n            {\r\n                title: '状态',\r\n                // dataIndex: 'status',\r\n                width:100,\r\n                render:(product)=>{\r\n                    const {status,_id} = product;\r\n                    return(\r\n                        <span>\r\n                            <Button type='primary' onClick={() =>this.updateStatus(_id,status===1?2:1)}>{status === 1 ? '下架' : '上架'}</Button>\r\n                            <span>{status === 1 ? '在售' : '已下架'}</span>\r\n                        </span>\r\n                    )\r\n                }\r\n            },\r\n            {\r\n              title: '操作',\r\n              width:100,\r\n              render:(product)=>(\r\n                <span>\r\n                    <LinkButton onClick={()=> this.props.history.push('/admin/product/detail',{product})}>详情</LinkButton>\r\n                    <LinkButton onClick={()=> this.props.history.push('/admin/product/addupate',product)}>修改</LinkButton>\r\n                </span>\r\n              )\r\n            }\r\n          ];\r\n    }\r\n\r\n    // 获取指定页码的列表数据显示\r\n    getProducts = async (pageNum)=>{\r\n        this.pageNum = pageNum;    //保存pageNum,让其它方法可以看到\r\n        this.setState({loading:true});\r\n        const {searchName,searchType} = this.state;\r\n        // 如果搜索关键字有值,说明我们要做搜索分页\r\n        let result;\r\n        if(searchName){\r\n            // console.log(searchName);\r\n            result = await reqSearchProducts({pageNum,pageSize:PAGE_SIZE,searchName,searchType});\r\n        }else{\r\n            result = await reqProducts(pageNum,PAGE_SIZE);\r\n        }\r\n        this.setState({loading:false});\r\n        if(result.status === 0){\r\n            // 取出分页数据,更新状态,显示分页列表\r\n            const {total,list} = result.data;\r\n            this.setState({\r\n                total,\r\n                products:list\r\n            });\r\n        }\r\n    }\r\n\r\n    // 更新指定商品的状态\r\n    updateStatus = async (productId,status)=>{\r\n        const result = await reqUpdateStatus(productId,status);\r\n        if(result.status === 0){\r\n            message.success('更新商品成功');\r\n            this.getProducts(this.pageNum);\r\n        }\r\n    }\r\n    componentWillMount(){\r\n        this.initColumns();\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getProducts(1);\r\n    }\r\n\r\n    render() {\r\n        // 取出状态数据\r\n        const {products,total,loading,searchName,searchType} = this.state;\r\n        const title = (\r\n            <span>\r\n                <Select value={searchType} style={{width:150}} onChange={value=>this.setState({searchType:value})}>\r\n                    <Option value='productName'>按名称搜索</Option>\r\n                    <Option value='productDesc'>按描述搜索</Option>\r\n                </Select>\r\n                <Input \r\n                    placeholder='关键字' \r\n                    style={{width:200,margin:'0 15px'}} \r\n                    value={searchName}\r\n                    onChange={event =>this.setState({searchName:event.target.value})}    \r\n                />\r\n                <Button type='primary' onClick={()=> this.getProducts(1)}>搜索</Button>\r\n            </span>\r\n        );\r\n        const extra = (\r\n            <Button type='primary' onClick={()=>this.props.history.push('/admin/product/addupate')}>\r\n                <Icon type='plus'/>\r\n                添加商品\r\n            </Button>\r\n        );          \r\n          \r\n        return (\r\n            <Card title={title} extra={extra}>\r\n                <Table\r\n                    bordered\r\n                    rowKey='_id'\r\n                    loading={loading}                     \r\n                    dataSource={products} \r\n                    columns={this.columns}\r\n                    pagination={{\r\n                        current:this.pageNum,\r\n                        total,\r\n                        defaultPageSize:PAGE_SIZE,\r\n                        showQuickJumper:true,\r\n                        onChange:this.getProducts\r\n                    }}    \r\n                />\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProductHome;","import React, { Component } from 'react'\r\nimport { Upload, Icon, Modal,message } from 'antd';\r\nimport PropTypes from 'prop-types'\r\nimport {reqDeleteImg} from '../../api/index'\r\nimport {BASE_IMG_URL} from '../../utils/constants'\r\n\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n/* 用于图片上传的组件 */\r\nclass PicturesWall extends Component {\r\n\r\n  static propTypes={\r\n    imgs:PropTypes.array\r\n  }\r\n\r\n  state = {\r\n    previewVisible: false,  //标识是否显示大图预览Modal\r\n    previewImage: '',       //大图的URL\r\n    fileList: [],\r\n  };\r\n\r\n  constructor(props){\r\n    super(props);\r\n    let fileList = [];\r\n    // 如果传入了imgs属性\r\n    const {imgs} = this.props;\r\n    if (imgs && imgs.length>0) {\r\n      fileList = imgs.map((img,index)=>({\r\n        uid:-index,\r\n        name:img,\r\n        status:'done',\r\n        url:BASE_IMG_URL+img\r\n      }));\r\n    }\r\n    //初始化状态\r\n    this.state = {\r\n      previewVisible:false,\r\n      previewImage:'',\r\n      fileList\r\n    }\r\n  }\r\n\r\n  /* 隐藏Modal */\r\n  handleCancel = () => this.setState({ previewVisible: false });\r\n\r\n  handlePreview = async file => {\r\n      /* 显示指定file对应的大图 */\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n\r\n    this.setState({\r\n      previewImage: file.url || file.preview,\r\n      previewVisible: true,\r\n    });\r\n  };\r\n\r\n  /* \r\n  file:当前操作的图片文件(上传/删除)\r\n  fileList:所有已上传图片文件对象的数组\r\n  */\r\n  handleChange = async ({ file,fileList }) =>{\r\n    if(file.status === 'done'){\r\n        const result = file.response;\r\n        if(result.status === 0){\r\n          message.success('上传图片成功');\r\n          const {name,url} = result.data;\r\n          file = fileList[fileList.length-1];\r\n          file.name = name;\r\n          file.url = url;\r\n        }else{\r\n          message.success('图片上传失败');\r\n        }\r\n    }else if(file.status === 'removed'){   //删除图片\r\n      const result = await reqDeleteImg(file.name);\r\n      if (result.status ===0) {\r\n        message.success(\"删除图片成功\");\r\n      }else{\r\n        message.error(\"删除图片失败\");\r\n      }\r\n    }\r\n    this.setState({ fileList })\r\n    console.log(fileList);\r\n  };\r\n\r\n  /* 获取所有已上传图片文件名的数组 */\r\n  getImgs = ()=>{\r\n    return this.state.fileList.map(file => file.name)\r\n  }\r\n\r\n  render() {\r\n    const { previewVisible, previewImage, fileList } = this.state;\r\n    const uploadButton = (\r\n      <div>\r\n        <Icon type=\"plus\" />\r\n        <div className=\"ant-upload-text\">Upload</div>\r\n      </div>\r\n    );\r\n    return (\r\n      <div>\r\n        <Upload\r\n          action=\"/manage/img/upload\" /* 上传图片的接口地址 */\r\n          accept='image/*'    /* 只接收图片格式 */\r\n          name='image'       /* 请求参数名 */\r\n          listType=\"picture-card\"   /* 卡片样式 */\r\n          fileList={fileList}        /* 所有已上传图片文件对象的数组 */\r\n          onPreview={this.handlePreview}\r\n          onChange={this.handleChange}\r\n        >\r\n          {fileList.length >= 3 ? null : uploadButton}\r\n        </Upload>\r\n        <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\r\n          <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default PicturesWall;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\r\nimport {Editor} from 'react-draft-wysiwyg';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\n/* 用来指定商品详情的富文本编辑器组件 */\r\nclass RichTextEditor extends Component {\r\n    static propTypes={\r\n        detail:PropTypes.string\r\n    }\r\n\r\n    state = {\r\n        editorState: EditorState.createEmpty(),   //创建一个没有内容的编辑对象\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const html = this.props.detail;\r\n        if (html) {   //如果有值,根据HTML格式字符串创建一个对应的编辑对象\r\n            const contentBlock = htmlToDraft(html);\r\n            if (contentBlock) {\r\n                const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\r\n                const editorState = EditorState.createWithContent(contentState);\r\n                this.state = {\r\n                editorState\r\n                };\r\n            }  \r\n        }\r\n    }\r\n      \r\n    /* 输入过程中实时的回调 */\r\n    onEditorStateChange = (editorState) => {\r\n        this.setState({\r\n            editorState,\r\n        });\r\n    };\r\n\r\n    getDeatil = ()=>{\r\n        /* 返回输入数据对应的HTML格式的文本 */\r\n        return draftToHtml(convertToRaw(this.state.editorState.getCurrentContent()))\r\n    }\r\n    render() {\r\n    const { editorState } = this.state;\r\n        return (\r\n            <Editor\r\n                editorState={editorState}\r\n                editorStyle={{border:'1px solid black',height:200,paddingLeft:10}}\r\n                onEditorStateChange={this.onEditorStateChange}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default RichTextEditor;","import React, { Component } from 'react'\r\nimport {Card,Icon,Form,Input,Cascader,Button,message} from 'antd'\r\nimport LinkButton from '../../components/link-button/linkButton'\r\nimport PicturesWall from './pictures-wall'\r\nimport {reqCategorys,reqAddOrUpdateProduct} from '../../api/index'\r\nimport RichTextEditor from './rich-text-editor'\r\nconst {Item} = Form;\r\nconst {TextArea} = Input;\r\n/* product的添加和更新的子路由组件 */\r\nclass ProductAddUpdate extends Component {\r\n    state = {\r\n        options:[],\r\n    };\r\n\r\n    constructor(props){\r\n        super(props);\r\n        //创建用来保存ref标识的标签对象的容器\r\n        this.pw = React.createRef();\r\n\r\n        this.editor = React.createRef();\r\n    }\r\n    // 验证价格的自定义验证函数\r\n    validatePrice = (rule,value,callback)=>{\r\n        if(value*1 > 0){\r\n            callback(); //验证通过\r\n        }else{\r\n            callback('价格必须大于1');\r\n        }\r\n    }\r\n\r\n    initOptions = async (categorys)=>{\r\n        //根据categorys生成options数组\r\n        const options = categorys.map(c =>({\r\n            value: c._id,\r\n            label: c.name,\r\n            isLeaf: false,  //不是叶子\r\n        }));\r\n        // 如果是一个二级分类商品的更新\r\n        const {isUpdate,product} = this;\r\n        const {pCategoryId,categoryId} = product;\r\n        if(isUpdate && pCategoryId !== '0'){\r\n            // 获取对应的二级分类表表\r\n           const subCategorys = await this.getCategorys(pCategoryId);\r\n            // 生成二级下拉列表的options\r\n           const childOptions = subCategorys.map(c=>({\r\n                value: c._id,\r\n                label: c.name,\r\n                isLeaf: true,\r\n            }));\r\n\r\n            // 找到当前商品对应的一级option对象\r\n            const targetOption = options.find(option=>option.value === pCategoryId);\r\n\r\n            // 关联对应的一级option上\r\n            targetOption.children = childOptions;\r\n        }\r\n        this.setState({\r\n            options\r\n        });\r\n    }\r\n\r\n    //异步获取一级/二级分类表并显示\r\n    getCategorys = async (parentId)=>{\r\n        const result = await reqCategorys(parentId);\r\n        if(result.status === 0){\r\n            const categorys = result.data;\r\n            if(parentId === '0'){  //一级列表\r\n                this.initOptions(categorys);\r\n            }else{  //二级列表\r\n                return categorys   //返回二级列表,  当前async函数返回的promise就会成功且value为categorys\r\n            }\r\n            this.initOptions(categorys);\r\n        }\r\n    }\r\n\r\n    //用于加载下一级列表的回调函数\r\n    loadData = async selectedOptions => {\r\n        //得到选择的option对象\r\n        const targetOption = selectedOptions[selectedOptions.length - 1];\r\n        //显示loading\r\n        targetOption.loading = true;\r\n    \r\n        //根据选中的分类,请求获取二级分类列表\r\n        const subCategorys = await this.getCategorys(targetOption.value);\r\n        targetOption.loading = false;\r\n        if(subCategorys && subCategorys.length > 0){\r\n            //生成当前一个二级列表的options\r\n            const childOptions = subCategorys.map(c =>({\r\n                value: c._id,\r\n                label: c.name,\r\n                isLeaf: true,\r\n            }));\r\n            //关联到当前option上\r\n            targetOption.children = childOptions;\r\n        }else{\r\n            targetOption.isLeaf = true;\r\n        }\r\n        \r\n        this.setState({\r\n        options: [...this.state.options],\r\n        });\r\n      };\r\n\r\n    submit = ()=>{\r\n        // 进行表单验证,如果通过了,才发送请求\r\n        this.props.form.validateFields(async (error,values)=>{\r\n            if(!error){\r\n\r\n                // 1.收集数据\r\n                const {name,desc,price,categoryIds} = values;\r\n                let pCategoryId,categoryId;\r\n                if(categoryIds.length === 1){\r\n                    pCategoryId = '0';\r\n                    categoryId = categoryIds[0];\r\n                }else{\r\n                    pCategoryId = categoryIds[0];\r\n                    categoryId = categoryIds[1];\r\n                }\r\n                const imgs = this.pw.current.getImgs();\r\n                const detail = this.editor.current.getDeatil();\r\n                const product = {name,desc,price,imgs,detail,pCategoryId,categoryId};\r\n\r\n                // 如果是更新,需要添加_id\r\n                if (this.isUpdate) {\r\n                    product._id = this.product._id;\r\n                }\r\n                // 2.调用接口请求函数去添加/更新\r\n                const result = await reqAddOrUpdateProduct(product);\r\n                // 3.根据结果显示\r\n                if(result.status === 0){\r\n                    message.success(`${this.isUpdate?'更新':'添加'}商品成功`);\r\n                    this.props.history.goBack();\r\n                }else{\r\n                    message.error(`${this.isUpdate?'更新':'添加'}商品失败`);\r\n                }\r\n               \r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    componentDidMount(){\r\n        this.getCategorys('0');\r\n    }\r\n    componentWillMount(){\r\n        const product = this.props.location.state;    //如果是添加没值,否则有值\r\n\r\n        //保存是否是更新的标识\r\n        this.isUpdate = !!product;\r\n        this.product = product || {};\r\n    }\r\n    render() {\r\n        const {isUpdate,product} = this;\r\n        const {pCategoryId,categoryId,imgs,detail} = product;\r\n        let categoryIds = [];\r\n        if(isUpdate){\r\n            if(pCategoryId === '0'){\r\n                categoryIds.push(categoryId);\r\n            }else{\r\n                categoryIds.push(pCategoryId);\r\n                categoryIds.push(categoryId);\r\n            }\r\n            \r\n        }\r\n        const formItemLayout = {\r\n            labelCol: {span:2},\r\n            wrapperCol: {span:8},\r\n        };\r\n        const title = (\r\n            <span>\r\n                <LinkButton>\r\n                    <Icon type='arrow-left' style={{marginRight:15,fontSize:20}}\r\n                        onClick={()=>this.props.history.goBack()}></Icon>\r\n                </LinkButton>\r\n                <span>{isUpdate?'修改商品':'添加商品'}</span>\r\n            </span>\r\n        );\r\n        const {getFieldDecorator} = this.props.form;\r\n        return (\r\n            <Card title={title} className='product-detail'>\r\n                <Form {...formItemLayout}>\r\n                    <Item label='商品名称'>\r\n                        {\r\n                            getFieldDecorator('name',{\r\n                                initialValue:product.name,\r\n                                rules:[\r\n                                    {required:true,message:'必须输入商品名称'}\r\n                                ]\r\n                            })(<Input placeholder='商品名称'/>)\r\n                        }                        \r\n                    </Item>\r\n                    <Item label='商品描述'>\r\n                        {\r\n                            getFieldDecorator('desc',{\r\n                                initialValue:product.desc,\r\n                                rules:[\r\n                                    {required:true,message:'必须输入商品描述'}\r\n                                ]\r\n                            })(<TextArea placeholder=\"请输入商品描述\" autoSize={{ minRows: 2, maxRows: 6 }} />)\r\n                        }\r\n                        \r\n                    </Item>\r\n                    <Item label='商品价格'>\r\n                        {\r\n                            getFieldDecorator('price',{\r\n                                initialValue:product.price,\r\n                                rules:[\r\n                                    {required:true,message:'必须输入商品价格'},\r\n                                    {validator:this.validatePrice}\r\n                                ]\r\n                            })(<Input type='number' placeholder='商品价格' addonAfter='元'/>)\r\n                        }\r\n                        \r\n                    </Item>\r\n                    <Item label='商品分类'>\r\n                        {\r\n                            getFieldDecorator('categoryIds',{\r\n                                initialValue:categoryIds,\r\n                                rules:[\r\n                                    {required:true,message:'必须输入商品分类'}\r\n                                ]\r\n                            })(<Cascader\r\n                                options={this.state.options}   //需要显示的列表数据数组\r\n                                loadData={this.loadData}  //当选择某个列表项,加载下一级列表的监听回调\r\n                            />)\r\n                        }\r\n                    </Item>\r\n                    <Item label='商品图片'>\r\n                        <PicturesWall ref={this.pw} imgs={imgs}/>\r\n                    </Item>\r\n                    <Item label='商品详情' labelCol={{span:2}} wrapperCol={{span:20}}>\r\n                        <RichTextEditor ref={this.editor} detail={detail}/>\r\n                    </Item>\r\n                    <Item>\r\n                        <Button type='primary' onClick={() => this.submit()}>提交</Button>\r\n                    </Item>\r\n                </Form>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Form.create()(ProductAddUpdate);","import React, { Component } from 'react';\r\nimport {Card,Icon,List} from 'antd'\r\nimport LinkButton from '../../components/link-button/linkButton'\r\nimport {BASE_IMG_URL} from '../../utils/constants'\r\nimport {reqCategoryInfo} from '../../api/index'\r\nconst Item = List.Item;\r\n/* Product的详情子路由组件 */\r\nclass ProductDetail extends Component {\r\n\r\n    state={\r\n        cName1:'',   //一级分类名称\r\n        cName2:''    //二级分类名称\r\n    }\r\n\r\n    async componentDidMount(){\r\n        // 得到当前商品的分类ID\r\n        const {pCategoryId,categoryId} = this.props.location.state.product;\r\n        if(pCategoryId === '0'){//一级分类下的商品\r\n            const result = await reqCategoryInfo(categoryId);\r\n            const cName1 = result.data.name;\r\n            this.setState({cName1});\r\n        }else{  //二级分类下的商品\r\n            // 通过多个await方式发多个请求:后面一个请求是在前一个请求成功返回之后才发送\r\n            /* const result1 = await reqCategoryInfo(pCategoryId);\r\n            const result2 = await reqCategoryInfo(categoryId);\r\n            const cName1 = result1.data.name;\r\n            const cName2 = result2.data.name;\r\n            this.setState({cName1,cName2}); */\r\n\r\n            // 一次性发送多个请求,只有都成功了,才正常处理\r\n            const results = await Promise.all([reqCategoryInfo(pCategoryId),reqCategoryInfo(categoryId)]);\r\n            const cName1 = results[0].data.name;\r\n            const cName2 = results[1].data.name;\r\n            this.setState({cName1,cName2});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {name,desc,price,imgs,detail} = this.props.location.state.product;\r\n        const {cName1,cName2} = this.state;\r\n        // console.log(product);\r\n        const title = (\r\n            <span>\r\n                <LinkButton>\r\n                    <Icon type='arrow-left' style={{marginRight:15,fontSize:20}}\r\n                        onClick={()=>this.props.history.goBack()}></Icon>\r\n                </LinkButton>\r\n                <span>商品详情</span>\r\n            </span>\r\n        );\r\n        return (\r\n            <Card title={title} className='product-detail'>\r\n                <List>\r\n                    <Item>\r\n                        <span className='left'>商品名称:</span>\r\n                        <span>{name}</span>\r\n                    </Item>\r\n                    <Item>\r\n                        <span className='left'>商品描述:</span>\r\n                        <span>{desc}</span>\r\n                    </Item>\r\n                    <Item>\r\n                        <span className='left'>商品价格:</span>\r\n                        <span>{price}</span>\r\n                    </Item>\r\n                    <Item>\r\n                        <span className='left'>所属分类:</span>\r\n                        <span>{cName1} {cName2?'-->'+cName2 : ''}</span>\r\n                    </Item>\r\n                    <Item>\r\n                        <span className='left'>商品图片:</span>\r\n                        <span>\r\n                           {\r\n                               imgs.map(img=>(\r\n                                   <img\r\n                                    key={img}\r\n                                    className='product-img'\r\n                                    src={BASE_IMG_URL +img}\r\n                                   />\r\n                               ))\r\n                           }\r\n                        </span>\r\n                    </Item>\r\n                    <Item>\r\n                        <span className='left'>商品详情:</span>\r\n                        <span dangerouslySetInnerHTML={{__html:detail}}></span>\r\n                    </Item>\r\n                </List>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProductDetail;","import React, { Component } from 'react';\r\nimport {Switch,Route,Redirect} from 'react-router-dom'\r\nimport ProductHome from './home'\r\nimport ProductAddUpdate from './add-update'\r\nimport ProductDetail from './detail'\r\nimport './product.less'\r\n\r\n/* 商品路由 */\r\nclass Product extends Component {\r\n    render() {\r\n        return (\r\n            <Switch>\r\n                <Route path='/admin/product' component={ProductHome} exact></Route>\r\n                <Route path='/admin/product/addupate' component={ProductAddUpdate}></Route>\r\n                <Route path='/admin/product/detail' component={ProductDetail}></Route>\r\n                <Redirect to='/admin/product'/>\r\n            </Switch>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Product;","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {Form,Input} from 'antd'\r\n\r\nconst Item = Form.Item;\r\n/* 添加角色的form组件 */\r\nclass AddForm extends Component {\r\n    static propTypes = {\r\n        setForm:PropTypes.func.isRequired\r\n    }\r\n    componentWillMount(){\r\n        this.props.setForm(this.props.form)\r\n    }\r\n    render() {\r\n        const {getFieldDecorator} = this.props.form;\r\n        const formItemLayout = {\r\n            labelCol: {span:4},\r\n            wrapperCol: {span:15},\r\n        };\r\n        return (\r\n            <Form>\r\n                <Item label='角色名称' {...formItemLayout}>\r\n                    {\r\n                        getFieldDecorator('roleName',{\r\n                            initialValue:'',\r\n                            rules:[\r\n                                {required:true,message:'角色名称必须输入'}\r\n                            ]\r\n                        })(<Input placeholder='请输入角色名称'></Input>)\r\n                    }                    \r\n                </Item>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Form.create()(AddForm);","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {Form,Input,Tree} from 'antd'\r\nimport menuList from '../../config/menuConfig'\r\n\r\nconst Item = Form.Item;\r\nconst { TreeNode } = Tree;\r\n/* 添加分类的form组件 */\r\nexport default class JurisdictionForm extends Component {\r\n    static propTypes = {\r\n        role:PropTypes.object\r\n    }\r\n\r\n    constructor(props){\r\n        super(props);\r\n        const {menus} = this.props.role;\r\n        // 根据传入的角色的menus生成初始状态\r\n        this.state = {\r\n            checkedKeys:menus\r\n        }\r\n    }\r\n\r\n    state = {\r\n        checkedKeys:[]\r\n    }\r\n\r\n    /* 为父组件提交获取最新menus数据 */\r\n    getMenus = ()=>this.state.checkedKeys;\r\n    getTreeNodes = (menuList)=>{\r\n        return menuList.reduce((pre,item)=>{\r\n            pre.push(\r\n                <TreeNode title={item.title} key={item.key}>\r\n                    {item.children?this.getTreeNodes(item.children):null}\r\n                </TreeNode>\r\n            );\r\n            return pre;\r\n        },[])\r\n    }\r\n\r\n    onCheck = checkedKeys => {\r\n        console.log(\"checkedKeys\",checkedKeys);\r\n        this.setState({checkedKeys});\r\n    }\r\n    /* \r\n    当组件接收到新的属性时自动调用\r\n    */\r\n    componentWillReceiveProps(nextProps){\r\n        const menus = nextProps.role.menus;\r\n        this.setState({\r\n            checkedKeys:menus\r\n        });\r\n    }\r\n\r\n    componentWillMount(){\r\n        this.treeNodes = this.getTreeNodes(menuList);\r\n    }\r\n    render() {\r\n        const formItemLayout = {\r\n            labelCol: {span:4},\r\n            wrapperCol: {span:15},\r\n        };\r\n        const {role} = this.props;\r\n        const {checkedKeys} = this.state;\r\n        return (\r\n            <Form {...formItemLayout}>\r\n                <Item label='角色名称'>\r\n                   <Input value={role.name} disabled></Input>\r\n                </Item>\r\n                <Tree\r\n                    checkable\r\n                    defaultExpandAll={true}\r\n                    checkedKeys={checkedKeys}\r\n                    // defaultSelectedKeys={['0-0-0', '0-0-1']}\r\n                    // defaultCheckedKeys={['0-0-0', '0-0-1']}\r\n                    // onSelect={this.onSelect}\r\n                    onCheck={this.onCheck}\r\n                >\r\n                    <TreeNode title=\"平台权限\" key=\"all\">\r\n                        {this.treeNodes}\r\n                    </TreeNode>\r\n                </Tree>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\n// export default Form.create()(JurisdictionForm);","import React, { Component } from 'react';\r\nimport {Card,Button,Table,Modal,message} from 'antd'\r\nimport {PAGE_SIZE} from '../../utils/constants.js'\r\nimport userStronge from '../../utils/storageUtils.js'\r\nimport {formateDate} from '../../utils/dateUtils.js'\r\nimport {reqRoles,reqAddRole,reqUpdateRole} from '../../api/index'\r\nimport AddForm from './add-form'\r\nimport JurisdictionForm from './jurisdiction-form'\r\nimport memoryUtils from '../../utils/memoryUtils.js';\r\nimport storageUtils from '../../utils/storageUtils.js';\r\n/* 角色路由 */\r\nclass Role extends Component {\r\n    state = {\r\n        roles:[],         //所有角色的列表\r\n        role:{},          // 选中的role\r\n        isShowAdd:false,       //是否显示添加界面\r\n        isShowJurisdiction:false,    //是否显示设置角色权限界面\r\n    }\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.jurisdiction = React.createRef();\r\n    }\r\n    /* 响应点击取消:隐藏确定框 */\r\n    handleCancel = ()=>{\r\n        // 清除输入数据\r\n        // this.form.resetFields();\r\n        \r\n    }\r\n\r\n    /* 添加角色 */\r\n    addRole = ()=>{\r\n        // 进行表单验证,只能通过了才向下处理\r\n        this.form.validateFields(async (err,values)=>{\r\n            console.log(this.form);\r\n            \r\n            if (!err) {\r\n                this.setState({isShowAdd:false});\r\n                // 收集输入数据\r\n                const {roleName} = values;\r\n                this.form.resetFields();\r\n\r\n                // 请求添加\r\n                const result = await reqAddRole(roleName);\r\n                if (result.status === 0) {\r\n                    message.success('添加成功');\r\n                    // this.getRoles();\r\n                    // 更新roles状态\r\n                    const role = result.data;\r\n                    // const roles = [...this.state.roles];\r\n                    // roles.push(role);\r\n                    // this.setState({\r\n                    //     roles\r\n                    // });\r\n                    // 更新roles状态,基于原本状态数据更新\r\n                    this.setState(state=>({\r\n                        roles:[this.state.roles,role]\r\n                    }))\r\n                }else{\r\n                    message.error('添加失败');\r\n                }\r\n                // 根据结果提示/更新列表显示\r\n            }\r\n        });\r\n    }\r\n\r\n    updateRole = async ()=>{\r\n        this.setState({isShowJurisdiction:false});\r\n        const authInfo = userStronge.getUser();\r\n        const role = this.state.role;\r\n        // 得到最新的menus\r\n        const menus = this.jurisdiction.current.getMenus();\r\n        role.menus = menus;\r\n        role.auth_time = new Date().getTime();\r\n        role.auth_name = authInfo.username;\r\n\r\n        // 请求更新\r\n        const result = await reqUpdateRole(role);\r\n        if (result.status===0) {\r\n            // 如果当前更新的是自己角色的权限,强制退出\r\n            if (role._id === memoryUtils.user.role_id) {\r\n                memoryUtils.user = {};\r\n                storageUtils.removeUser();\r\n                this.props.history.replace('/login');\r\n                message.success('当前用户角色权限修改了,重新登录');\r\n            }else{\r\n                message.success('设置角色权限成功');\r\n                this.setState({\r\n                    roles:[...this.state.roles]\r\n                });\r\n            }\r\n           \r\n        }else{\r\n            message.error('设置角色权限失败')\r\n        }\r\n    }\r\n\r\n    initColumn = ()=>{\r\n        this.columns = [\r\n            {\r\n                title:'角色名称',\r\n                dataIndex:'name'\r\n            },\r\n            {\r\n                title:'创建时间',\r\n                dataIndex:'create_time',\r\n                render:(create_time)=>formateDate(create_time)\r\n            },\r\n            {\r\n                title:'授权时间',\r\n                dataIndex:'auth_time',\r\n                render:formateDate\r\n            },\r\n            {\r\n                title:'授权人',\r\n                dataIndex:'auth_name'\r\n            },\r\n        ]\r\n    }\r\n\r\n    // 获取所有角色列表\r\n    getRoles = async ()=>{\r\n        const result = await reqRoles();\r\n        if (result.status === 0) {\r\n            const roles = result.data;\r\n            this.setState({\r\n                roles\r\n            })\r\n        }\r\n    }\r\n\r\n    onRow = (role)=>{\r\n        return {\r\n            onClick:event =>{       //点击行\r\n                console.log('row onClick',role);\r\n                this.setState({\r\n                    role\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        this.initColumn();\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getRoles();\r\n    }\r\n\r\n    render() {\r\n        const {roles,role,isShowAdd,isShowJurisdiction} = this.state;\r\n        const title = (\r\n            <span>\r\n                <Button type='primary' onClick={()=>this.setState({isShowAdd:true})}>创建角色</Button> &nbsp;&nbsp;\r\n                <Button type='primary' onClick={()=>this.setState({isShowJurisdiction:true})} disabled={!role._id}>设置角色权限</Button>\r\n            </span>\r\n        )\r\n        \r\n        return (\r\n            <Card title={title}>\r\n                <Table\r\n                    rowKey='_id'\r\n                    // loading={loading}                     \r\n                    dataSource={roles} \r\n                    columns={this.columns}\r\n                    pagination={{defaultPageSize:PAGE_SIZE,showQuickJumper:true}}\r\n                    rowSelection={{\r\n                        type:'radio',\r\n                        selectedRowKeys:[role._id],\r\n                        onSelect:(role) =>{\r\n                            this.setState({\r\n                                role\r\n                            });\r\n                        }\r\n                        \r\n                    }}\r\n                    onRow={this.onRow}\r\n                />\r\n                <Modal\r\n                    title=\"添加角色\"\r\n                    visible={isShowAdd}\r\n                    onOk={this.addRole}\r\n                    onCancel={() => {\r\n                        this.setState({isShowAdd:false})\r\n                        this.form.resetFields();\r\n                    }}\r\n                >\r\n                    <AddForm setForm={(form)=>{this.form = form}}></AddForm>\r\n                </Modal>\r\n                <Modal\r\n                    title=\"设置权限\"\r\n                    visible={isShowJurisdiction}\r\n                    onOk={this.updateRole}\r\n                    onCancel={() => {\r\n                        this.setState({isShowJurisdiction:false});\r\n                    }}\r\n                >\r\n                    <JurisdictionForm ref={this.jurisdiction} role={role}></JurisdictionForm>\r\n                </Modal>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Role;","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {Form,Input,Select} from 'antd'\r\n\r\nconst Item = Form.Item;\r\nconst Option = Select.Option;\r\n/* 添加/修改用户的form组件 */\r\nclass UserForm extends Component {\r\n    static propTypes = {\r\n        setForm:PropTypes.func.isRequired,\r\n        roles:PropTypes.array.isRequired,\r\n        user:PropTypes.object\r\n    }\r\n    componentWillMount(){\r\n        this.props.setForm(this.props.form)\r\n    }\r\n    render() {\r\n        const {roles,user} = this.props;\r\n        const {getFieldDecorator} = this.props.form;\r\n        const formItemLayout = {\r\n            labelCol: {span:4},\r\n            wrapperCol: {span:15},\r\n        };\r\n        return (\r\n            <Form {...formItemLayout}>\r\n                <Item label='用户名称'>\r\n                    {\r\n                        getFieldDecorator('username',{\r\n                            initialValue:user.username,\r\n                            rules:[\r\n                                {required:true,message:'用户名称必须输入'}\r\n                            ]\r\n                        })(<Input placeholder='请输入用户名称'></Input>)\r\n                    }                    \r\n                </Item>\r\n                    {\r\n                        user._id?null:(\r\n                            <Item label='密码'>\r\n                                {\r\n                                    getFieldDecorator('password',{\r\n                                        initialValue:user.password,\r\n                                        rules:[\r\n                                            {required:true,message:'密码必须输入'}\r\n                                        ]\r\n                                    })(<Input type='password' placeholder='请输入密码'></Input>)\r\n                                }                    \r\n                            </Item>\r\n                        )\r\n                    }\r\n                \r\n                <Item label='手机号'>\r\n                    {\r\n                        getFieldDecorator('phone',{\r\n                            initialValue:user.phone,\r\n                            rules:[\r\n                                {required:true,message:'手机号必须输入'}\r\n                            ]\r\n                        })(<Input type='number' placeholder='请输入手机号'></Input>)\r\n                    }                    \r\n                </Item>\r\n                <Item label='邮箱'>\r\n                    {\r\n                        getFieldDecorator('email',{\r\n                            initialValue:user.email,\r\n                            rules:[\r\n                                {required:true,message:'邮箱必须输入'}\r\n                            ]\r\n                        })(<Input placeholder='请输入邮箱'></Input>)\r\n                    }                    \r\n                </Item>\r\n                <Item label='角色'>\r\n                    {\r\n                        getFieldDecorator('role_id',{\r\n                            initialValue:user.role_id,\r\n                            rules:[\r\n                                {required:true,message:'角色必须选择'}\r\n                            ]\r\n                        })(\r\n                            <Select placeholder='请选择角色'>\r\n                                {\r\n                                    roles.map(role => <Option key={role._id} value={role._id}>{role.name}</Option>)\r\n                                }\r\n                            </Select>\r\n                        )\r\n                    }                    \r\n                </Item>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Form.create()(UserForm);","import React, { Component } from 'react';\r\nimport {Card,Button,Table,Modal,message} from 'antd'\r\nimport {formateDate} from '../../utils/dateUtils.js'\r\nimport LinkButton from '../../components/link-button/linkButton'\r\nimport UserForm from './user-form'\r\nimport {PAGE_SIZE} from '../../utils/constants'\r\nimport {reqUsers,reqAddOrUpdateUser, reqDeleteUser} from '../../api/index'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\n\r\n/* 用户路由 */\r\nclass User extends Component {\r\n    state={\r\n        users:[],      //所有用户列表\r\n        roles:[],       //所有角色的列表\r\n        isShow:false,\r\n    }\r\n\r\n    initColumns = ()=>{\r\n        this.columns = [\r\n            {\r\n                title:'用户名',\r\n                dataIndex:'username'\r\n            },\r\n            {\r\n                title:'邮箱',\r\n                dataIndex:'email'\r\n            },\r\n            {\r\n                title:'电话',\r\n                dataIndex:'phone'\r\n            },\r\n            {\r\n                title:'注册时间',\r\n                dataIndex:'create_time',\r\n                render:formateDate\r\n            },\r\n            {\r\n                title:'所属角色',\r\n                dataIndex:'role_id',\r\n                render:(role_id)=>this.roleNames[role_id]\r\n            },\r\n            {\r\n                title:'操作',\r\n                render:(user) =>(\r\n                    <span>\r\n                        <LinkButton onClick={()=>this.showUpdate(user)}>修改</LinkButton>\r\n                        <LinkButton onClick={()=>this.deleteUser(user)}>删除</LinkButton>\r\n                    </span>\r\n                )\r\n            },\r\n        ]\r\n    }\r\n\r\n    /* 显示更新用户界面 */\r\n    showUpdate = (user)=>{\r\n        this.user = user;\r\n        this.setState({isShow:true});\r\n    }\r\n\r\n    /* 显示添加用户界面 */\r\n    showAdd = ()=>{\r\n        this.user = null;\r\n        this.setState({isShow:true});\r\n    }\r\n\r\n    /* 根据roles的数组,生成包含所有角色名的对象(属性名用角色id值) */\r\n    initRoleNames = (roles)=>{\r\n        const roleNames = roles.reduce((pre,role)=>{\r\n            pre[role._id] = role.name;\r\n            return pre;\r\n        },{});\r\n        // 保存\r\n        this.roleNames = roleNames;\r\n    }\r\n    /* 添加/更新用户 */\r\n    addOrUpdateUser = ()=>{\r\n        this.form.validateFields(async (err,values)=>{\r\n            \r\n            if (!err) {\r\n                this.form.resetFields();\r\n                this.setState({isShow:false});\r\n                console.log(values);\r\n                if (this.user) {\r\n                    values._id = this.user._id;\r\n                }\r\n                const result = await reqAddOrUpdateUser(values);\r\n                if (result.status===0) {\r\n                    message.success(`${this.user?'修改':'添加'}用户成功`);\r\n                    this.getUsers();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /* 删除用户 */\r\n    deleteUser = (user)=>{\r\n        Modal.confirm({\r\n            title:`确认删除${user.username}`,\r\n            onOk: async ()=>{\r\n                const result = await reqDeleteUser(user._id);\r\n                if (result.status===0) {\r\n                    message.success('删除用户成功');\r\n                    this.getUsers();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /* 获取所有用户列表 */\r\n    getUsers = async ()=>{\r\n        const id = memoryUtils.user._id;\r\n        const result =  await reqUsers(id);\r\n        if (result.status === 0) {\r\n            const {users,roles} = result.data;\r\n            this.initRoleNames(roles);\r\n            this.setState({\r\n                users,\r\n                roles\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        this.initColumns();\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getUsers();\r\n    }\r\n\r\n    render() {\r\n        const {users,roles,isShow} = this.state;\r\n        const user = this.user || {};\r\n        const title = <Button type='primary' onClick={()=>this.showAdd()}>添加用户</Button>\r\n        return (\r\n            <Card title={title}>\r\n                <Table\r\n                rowKey='_id'\r\n                // loading={loading}                     \r\n                dataSource={users} \r\n                columns={this.columns}\r\n                pagination={{defaultPageSize:PAGE_SIZE}}\r\n              />\r\n              <Modal\r\n                title={user._id?'修改用户':'添加用户'}\r\n                visible={isShow}\r\n                onOk={this.addOrUpdateUser}\r\n                onCancel={()=>{\r\n                    this.form.resetFields();\r\n                    this.setState({isShow:false})\r\n                }}\r\n              >\r\n                  <UserForm \r\n                    setForm={form => this.form = form}\r\n                    roles={roles}\r\n                    user={user}\r\n                  />\r\n              </Modal>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default User;","import React, {Component} from 'react'\r\nimport {Card, Button} from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\n/*\r\n后台管理的柱状图路由组件\r\n */\r\nexport default class Bar extends Component {\r\n\r\n  state = {\r\n    sales: [5, 20, 36, 10, 10, 20], // 销量的数组\r\n    stores: [6, 10, 25, 20, 15, 10], // 库存的数组\r\n  }\r\n\r\n  update = () => {\r\n    this.setState(state => ({\r\n      sales: state.sales.map(sale => sale + 1),\r\n      stores: state.stores.reduce((pre, store) => {\r\n        pre.push(store-1)\r\n        return pre\r\n      }, []),\r\n    }))\r\n  }\r\n\r\n  /*\r\n  返回柱状图的配置对象\r\n   */\r\n  getOption = (sales, stores) => {\r\n    return {\r\n      title: {\r\n        text: '库存销量'\r\n      },\r\n      tooltip: {},\r\n      legend: {\r\n        data:['销量', '库存']\r\n      },\r\n      xAxis: {\r\n        data: [\"衬衫\",\"羊毛衫\",\"雪纺衫\",\"裤子\",\"高跟鞋\",\"袜子\"]\r\n      },\r\n      yAxis: {},\r\n      series: [{\r\n        name: '销量',\r\n        type: 'bar',\r\n        data: sales\r\n      }, {\r\n        name: '库存',\r\n        type: 'bar',\r\n        data: stores\r\n      }]\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {sales, stores} = this.state\r\n    return (\r\n      <div>\r\n        <Card title={'2019-11-07'} extra={( <Button type='primary' onClick={this.update}>更新</Button>)}>\r\n          <ReactEcharts option={this.getOption(sales, stores)} />\r\n        </Card>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Card, Button} from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\n/*\r\n后台管理的折线图路由组件\r\n */\r\nexport default class Line extends Component {\r\n\r\n  state = {\r\n    sales: [5, 20, 36, 10, 10, 20], // 销量的数组\r\n    stores: [6, 10, 25, 20, 15, 10], // 库存的数组\r\n  }\r\n\r\n  update = () => {\r\n    this.setState(state => ({\r\n      sales: state.sales.map(sale => sale + 1),\r\n      stores: state.stores.reduce((pre, store) => {\r\n        pre.push(store-1)\r\n        return pre\r\n      }, []),\r\n    }))\r\n  }\r\n\r\n  /*\r\n  返回柱状图的配置对象\r\n   */\r\n  getOption = (sales, stores) => {\r\n    return {\r\n      title: {\r\n        text: '折线'\r\n      },\r\n      tooltip: {},\r\n      legend: {\r\n        data:['销量', '库存']\r\n      },\r\n      xAxis: {\r\n        data: [\"衬衫\",\"羊毛衫\",\"雪纺衫\",\"裤子\",\"高跟鞋\",\"袜子\"]\r\n      },\r\n      yAxis: {},\r\n      series: [{\r\n        name: '销量',\r\n        type: 'line',\r\n        data: sales\r\n      }, {\r\n        name: '库存',\r\n        type: 'line',\r\n        data: stores\r\n      }]\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {sales, stores} = this.state\r\n    return (\r\n      <div>\r\n        <Card>\r\n          <Button type='primary' onClick={this.update}>更新</Button>\r\n        </Card>\r\n\r\n        <Card title='折线图一'>\r\n          <ReactEcharts option={this.getOption(sales, stores)} />\r\n        </Card>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport {Card} from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\n/*\r\n后台管理的饼图路由组件\r\n */\r\nexport default class Pie extends Component {\r\n\r\n  getOption = () => {\r\n    return {\r\n      title : {\r\n        text: '某站点用户访问来源',\r\n        subtext: '纯属虚构',\r\n        x:'center'\r\n      },\r\n      tooltip : {\r\n        trigger: 'item',\r\n        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n      },\r\n      legend: {\r\n        orient: 'vertical',\r\n        left: 'left',\r\n        data: ['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']\r\n      },\r\n      series : [\r\n        {\r\n          name: '访问来源',\r\n          type: 'pie',\r\n          radius : '55%',\r\n          center: ['50%', '60%'],\r\n          data:[\r\n            {value:335, name:'直接访问'},\r\n            {value:310, name:'邮件营销'},\r\n            {value:234, name:'联盟广告'},\r\n            {value:135, name:'视频广告'},\r\n            {value:1548, name:'搜索引擎'}\r\n          ],\r\n          itemStyle: {\r\n            emphasis: {\r\n              shadowBlur: 10,\r\n              shadowOffsetX: 0,\r\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    };\r\n\r\n  }\r\n\r\n  getOption2 = () => {\r\n    return {\r\n      backgroundColor: '#2c343c',\r\n\r\n      title: {\r\n        text: '测试数据',\r\n        left: 'center',\r\n        top: 20,\r\n        textStyle: {\r\n          color: '#ccc'\r\n        }\r\n      },\r\n\r\n      tooltip : {\r\n        trigger: 'item',\r\n        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n      },\r\n\r\n      visualMap: {\r\n        show: false,\r\n        min: 80,\r\n        max: 600,\r\n        inRange: {\r\n          colorLightness: [0, 1]\r\n        }\r\n      },\r\n      series : [\r\n        {\r\n          name:'访问来源',\r\n          type:'pie',\r\n          radius : '55%',\r\n          center: ['50%', '50%'],\r\n          data:[\r\n            {value:335, name:'直接访问'},\r\n            {value:310, name:'邮件营销'},\r\n            {value:274, name:'联盟广告'},\r\n            {value:235, name:'视频广告'},\r\n            {value:400, name:'搜索引擎'}\r\n          ].sort(function (a, b) { return a.value - b.value; }),\r\n          roseType: 'radius',\r\n          label: {\r\n            normal: {\r\n              textStyle: {\r\n                color: 'rgba(255, 255, 255, 0.3)'\r\n              }\r\n            }\r\n          },\r\n          labelLine: {\r\n            normal: {\r\n              lineStyle: {\r\n                color: 'rgba(255, 255, 255, 0.3)'\r\n              },\r\n              smooth: 0.2,\r\n              length: 10,\r\n              length2: 20\r\n            }\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              color: '#c23531',\r\n              shadowBlur: 200,\r\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n            }\r\n          },\r\n\r\n          animationType: 'scale',\r\n          animationEasing: 'elasticOut',\r\n          animationDelay: function (idx) {\r\n            return Math.random() * 200;\r\n          }\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Card title='流量统计一'>\r\n          <ReactEcharts option={this.getOption()} style={{height: 300}}/>\r\n        </Card>\r\n        <Card title='流量统计二'>\r\n          <ReactEcharts option={this.getOption2()} style={{height: 300}}/>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {Component} from 'react'\r\nimport {Button, Row, Col} from 'antd'\r\n\r\nimport './not-found.less'\r\n\r\n/*\r\n前台404页面\r\n */\r\nclass NotFound extends Component {\r\n\r\n  goHome = () => {\r\n    this.props.history.replace('/admin/home')\r\n  }\r\n\r\n  render() {\r\n    return (\r\n\r\n      <Row className='not-found'>\r\n        <Col span={12} className='left'></Col>\r\n        <Col span={12} className='right'>\r\n          <h1>404</h1>\r\n          <h2>抱歉，你访问的页面不存在</h2>\r\n          <div>\r\n            <Button type='primary' onClick={this.goHome}>\r\n              回到首页\r\n            </Button>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NotFound","import React, { Component } from 'react'\r\nimport {Redirect,Route,Switch} from 'react-router-dom'\r\nimport memoryUtils from '../../utils/memoryUtils.js'\r\n// import {Route,Switch} from 'react-router-dom'\r\nimport {Layout} from 'antd'\r\nimport LeftNav from '../../components/left-nav/left-nav';\r\nimport Header from '../../components/header/header'\r\nimport Home from '../home/home'\r\nimport Category from '../category/category'\r\nimport Product from '../product/product'\r\nimport Role from '../role/role'\r\nimport User from '../user/user'\r\nimport Bar from '../charts/bar'\r\nimport Line from '../charts/line'\r\nimport Pie from '../charts/pie'\r\nimport NotFound from '../not-found/not-found'\r\nconst {Footer,Sider,Content} = Layout;\r\n/* 后台管理的路由组件 */\r\nclass Admin extends Component {\r\n    render() {\r\n        const user = memoryUtils.user;\r\n        console.log(user);\r\n        if(!user || !user._id){\r\n            return <Redirect to='/login'/>\r\n        }\r\n        return (\r\n            <Layout style={{minHeight:'100%'}}>\r\n                <Sider>\r\n                    <LeftNav></LeftNav>\r\n                </Sider>\r\n                <Layout>\r\n                    <Header>header</Header>\r\n                    <Content style={{margin:20,backgroundColor:'#fff'}}>\r\n                        <Switch>\r\n                            <Redirect exact={true} from='/' to='/admin/home'></Redirect>\r\n                            <Route path='/admin/home' component={Home}></Route>\r\n                            <Route path='/admin/category' component={Category}></Route>\r\n                            <Route path='/admin/product' component={Product}></Route>\r\n                            <Route path='/admin/role' component={Role}></Route>\r\n                            <Route path='/admin/user' component={User}></Route>\r\n                            <Route path='/admin/charts/bar' component={Bar}></Route>\r\n                            <Route path='/admin/charts/line' component={Line}></Route>\r\n                            <Route path='/admin/charts/pie' component={Pie}></Route>\r\n                            <Route component={NotFound}></Route>\r\n                        </Switch>\r\n                    </Content>\r\n                    <Footer style={{textAlign:'center',color:'#ccc'}}>推荐使用谷歌浏览器,可以获得更佳页面操作体验</Footer>\r\n                </Layout>\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Admin;","import React, { Component } from 'react';\nimport {BrowserRouter,Route,Switch} from 'react-router-dom'\nimport Login from './pages/login/login'\nimport Admin from './pages/admin/admin'\n\nclass App extends Component {\n  render() {\n    return (\n      <BrowserRouter>\n        <Switch>          \n          <Route path=\"/login\" component={Login}></Route>\n          <Route path=\"/admin\" component={Admin}></Route>\n        </Switch>\n      </BrowserRouter>\n    );\n  }\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport memoryUtils from './utils/memoryUtils'\nimport storageUtils from './utils/storageUtils'\nconst user = storageUtils.getUser();\nmemoryUtils.user=user;\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}